/*
YUI 3.8.0 (build 5744)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("plugin",function(e,t){function n(t){!this.hasImpl||!this.hasImpl(e.Plugin.Base)?n.superclass.constructor.apply(this,arguments):n.prototype.initializer.apply(this,arguments)}n.ATTRS={host:{writeOnce:!0}},n.NAME="plugin",n.NS="plugin",e.extend(n,e.Base,{_handles:null,initializer:function(e){this._handles=[]},destructor:function(){if(this._handles)for(var e=0,t=this._handles.length;e<t;e++)this._handles[e].detach()},doBefore:function(e,t,n){var r=this.get("host"),i;return e in r?i=this.beforeHostMethod(e,t,n):r.on&&(i=this.onHostEvent(e,t,n)),i},doAfter:function(e,t,n){var r=this.get("host"),i;return e in r?i=this.afterHostMethod(e,t,n):r.after&&(i=this.afterHostEvent(e,t,n)),i},onHostEvent:function(e,t,n){var r=this.get("host").on(e,t,n||this);return this._handles.push(r),r},afterHostEvent:function(e,t,n){var r=this.get("host").after(e,t,n||this);return this._handles.push(r),r},beforeHostMethod:function(t,n,r){var i=e.Do.before(n,this.get("host"),t,r||this);return this._handles.push(i),i},afterHostMethod:function(t,n,r){var i=e.Do.after(n,this.get("host"),t,r||this);return this._handles.push(i),i},toString:function(){return this.constructor.NAME+"["+this.constructor.NS+"]"}}),e.namespace("Plugin").Base=n},"3.8.0",{requires:["base-base"]});

M.add("p-node-placeholder",function(Y){var _2=Y.UA.ie,_3=Y.Lang.trim;var _4=Y.mt.util;function Placeholder(){this.handler={submit:null};Placeholder.superclass.constructor.apply(this,arguments);}Placeholder.NAME="placeholderPlugin";Placeholder.NS="placeholder";Placeholder.ATTRS={placeholder:{valueFn:"_getPlaceholderValue",readOnly:true}};Placeholder.PLACEHOLDER_CLASS="placeholder";Y.extend(Placeholder,Y.Plugin.Base,{initializer:function(){var _5=this,_6=_5.get("host"),_7;if(_6){_7=_6.ancestor("form");}if(!(_6 instanceof Y.Node)||_4.isSupportPlaceholder()){return;}_5.onHostEvent("focus",_5._hide);_5.onHostEvent("blur",function(){_5._show(false);});if(_7){_5.handler.submit=_7.on("submit",function(){_5._hide();});}if(_2){_4.addLoadListener(function(){if(_6.get("value")){_6.removeClass(Placeholder.PLACEHOLDER_CLASS);}_5._show(true);});}_5._show(true);},destructor:function(){if(this.handler.submit){this.handler.submit.detach();}},_show:function(_8){var _9=this.get("host"),_a=this.get("placeholder");if(_9.get("value")===""||(_8&&this._isValueEqualPlaceholder())){_9.set("value",_a);_9.addClass(Placeholder.PLACEHOLDER_CLASS);}},_hide:function(){var _b=this.get("host");if(this._isValueEqualPlaceholder()){this._removePlaceholder();_b.removeClass(Placeholder.PLACEHOLDER_CLASS);}},_isValueEqualPlaceholder:function(){return this.get("host").get("value")===this.get("placeholder");},_removePlaceholder:function(){var _c=this.get("host"),_d=this.get("placeholder"),_e=_3(_c.get("value")),_f=_d.length,_10=_e.length-_f,i,str;if(_d===_e){_c.set("value","");return;}if(_e.indexOf(_d)===0){_c.set("value",_e.substring(_f));return;}if(_e.lastIndexOf(_d)===_10){_c.set("value",_e.substring(0,_10));return;}for(i=1;i<(_f-1);++i){str=_e.substring(0,i)+_e.substring(i+_10);if(str===_d){_c.set("value",_e.substring(i,i+_10));return;}}},_getPlaceholderValue:function(){return this.get("host").getAttribute("placeholder");}});Y.namespace("mt.plugin").Placeholder=Placeholder;},"1.0.0",{requires:["mt-base","plugin"]});
M.add("mt-uiutil",function(Y){var $D=Y.DOM;Y.mt.UIUtil={toggleNode:function(_3,_4,_5){var _6=Y.one(_3);var _7=_6.all(_4);var _8=_6.all(_5);var _9="hover";_6.delegate("click",function(){var _a=_8.item(_7.indexOf(this));var _b=_a.getStyle("display");_a.setStyle("display",_b==="none"?"block":"none");},_4);_6.delegate("mouseover",function(){this.addClass(_9);},_4);_6.delegate("mouseout",function(){this.removeClass(_9);},_4);},getDimensions:function(_c){_c=Y.one(_c);var el=_c.getDOMNode(),_e=_c.ancestor(),_f={},_10=0,_11=0,old={},_13,_14,_15={position:"absolute",visibility:"hidden",display:"block"};Y.Array.each(["marginTop","marginBottom","marginLeft","marginRight","paddingLeft","paddingRight","paddingBottom","paddingTop","borderLeftWidth","borderRightWidth","borderBottomWidth","borderTopWidth"],function(val){_f[val]=parseInt($D.getStyle(el,val),10);});if(el.offsetHeight!==0){Y.mix(_f,{offsetHeight:el.offsetHeight,offsetWidth:el.offsetWidth,width:parseInt($D.getStyle(el,"width"),10),height:parseInt($D.getStyle(el,"height"),10)});}else{for(_14 in _15){if(_15.hasOwnProperty(_14)){old[_14]=el.style[_14];el.style[_14]=_15[_14];}}_13=_e.getStyle("position");if(_13!=="relative"&&_13!=="absolute"){_e.setStyle("position","relative");}Y.mix(_f,{offsetHeight:el.offsetHeight,offsetWidth:el.offsetWidth});_e.setStyle("position",_13);for(_14 in _15){if(_15.hasOwnProperty(_14)){el.style[_14]=old[_14];}}Y.Array.each(["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],function(val){_10+=_f[val];});Y.Array.each(["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],function(val){_11+=_f[val];});_f.width=_f.offsetWidth-_10;_f.height=_f.offsetHeight-_11;}return _f;},loadImg:function(){var _19=[],_1a=null,_1b=function(){var i=0;for(i;i<_19.length;i++){if(_19[i].end){i--;_19.splice(i,1);}else{_19[i]();}}if(_19.length===0){_1d();}},_1d=function(){window.clearInterval(_1a);_1a=null;};return function(url,_1f,_20,_21){var _22,_23,_24,_25,img=new Image();img.src=url;if(img.complete){if(_1f){_1f.call(img);}if(_20){_20.call(img);}return;}_22=img.width;_23=img.height;onready();if(!onready.end){_19.push(onready);if(_1a===null){_1a=window.setInterval(_1b,40);}}img.onerror=function(){if(_21){_21.call(img);}onready.end=true;img=img.onload=img.onerror=null;};img.onload=function(){if(!onready.end){onready();}if(_20){_20.call(img);}img=img.onload=img.onerror=null;};function onready(){_24=img.width;_25=img.height;if(_24!==_22||_25!==_23||_24*_25>1024){if(_1f){_1f.call(img);}onready.end=true;}}};}};},"1.0.0",{requires:["mt-base"]});
M.add("p-node-effect",function(Y){var $N=Y.Node;var _3=Y.Lang.isString;var _4=Y.Lang.isNumber;var _5=Y.Lang.isArray;var _6=Y.Lang.isFunction;var _7=Y.mt.UIUtil;var _8={"slow":600,"middle":400,"fast":200},_9={yellow:{from:"#FFF478",to:"#FFFFFF"}},_a="backgroundColor",_b="position",_c="Effect.start",_d="Effect.end";function Effect(_e){this._running=0;Effect.superclass.constructor.apply(this,arguments);}Effect.NAME="effectPlugin";Effect.NS="effect";Effect.ATTRS={};Y.extend(Effect,Y.Plugin.Base,{initializer:function(){var _f=this,_10=_f.get("host");if(!(_10 instanceof Y.Node)){return;}_10.publish(_c,{emitFacade:true,defaultFn:function(){_f._running++;}});_10.publish(_d,{emitFacade:true,defaultFn:function(){_f._running--;}});},destructor:function(){},fadeInSimple:function(_11,_12,_13){var _14=this,_15=_14.get("host"),_16;_11=_14._getSpeed(_11);_15.setStyle("opacity",0).show();_16=_14._fade(_15,1,_11,_12,_13,{easing:Y.Easing.easeIn});_14._run(_16);},fadeIn:function(_17,_18,_19){var _1a=this,_1b=_1a.get("host"),_1c=_7.getDimensions(_1b),_1d=_1a._cloneLayout(_1b,"div"),_1e,_1f;_17=_1a._getSpeed(_17);_1d.setStyles({"height":0,"display":"block"});_1b.replace(_1d);_1f=_1a._fade(_1b,1,_17,_18,_19,{easing:Y.Easing.easeIn});_1e=new Y.Anim({node:_1d,to:{height:_1c.marginTop+_1c.offsetHeight+_1c.marginBottom},duration:_17*0.6,easing:Y.Easing.easeIn});_1e.on("end",function(){_1a._setPosition(_1b);_1b.setStyle("opacity",0).show();_1d.replace(_1b);});_1a._run(_1e,_1f);},fadeOutSimple:function(_20,_21,_22,_23){var _24=this,_25=_24.get("host"),_26,cb=function(){_25.hide();if(_6(_22)){_22.call(_25);}if(_20){_25.remove(true);}};_21=_24._getSpeed(_21);_26=_24._fade(_25,0,_21,cb,_23,{easing:Y.Easing.easeOut});_25.show();_24._run(_26);},fadeOut:function(_28,_29,_2a,_2b){var _2c=this,_2d=_2c.get("host"),_2e=_2d.getStyle("opacity"),_2f=_7.getDimensions(_2d),_30=_2c._cloneLayout(_2d,"div"),_31,_32;_29=_2c._getSpeed(_29);_30.setStyles({"height":_2f.marginTop+_2f.offsetHeight+_2f.marginBottom,"display":"block"});_2c._setPosition(_2d);_32=_2c._fade(_2d,0,_29,null,_2b,{easing:Y.Easing.easeOut});_32.on("end",function(){_2d.replace(_30);});_31=new Y.Anim({node:_30,to:{height:0},duration:_29*0.6,easing:Y.Easing.easeOut});_31.on("end",function(){_2d.setStyles({"display":"none","opacity":_2e});_30.replace(_2d);if(_6(_2a)){_2a.call(_2d);}if(_28){_2d.destroy(true);}});_2c._run(_32,_31);},yellowFadeOut:function(_33,_34,_35){this.fadeOut(_33,_34,_35,"yellow");},yellowFadeIn:function(_36,_37){this.fadeIn(_36,_37,"yellow");},_fade:function(nd,to,_3a,_3b,_3c,_3d){var _3e,_3f,f,t,_42={node:nd,from:{},to:{opacity:to},duration:_3a,easing:Y.Easing.easeNone};if(_3c){if(_3c in _9){_3e=_9[_3c];f=_3e.from;t=_3e.to;}else{if(_5(_3c)&&_3c.length===2){f=_3c[0];t=_3c[1];}}_42.from[_a]=f;_42.to[_a]=t;}Y.mix(_42,_3d||{},true);_3f=new Y.Anim(_42);_3f.on("end",function(){if(_6(_3b)){_3b.call(nd);}});return _3f;},slideDown:function(_43,_44){var _45=this,_46=_45.get("host"),_47=_7.getDimensions(_46),_48=_45._cloneLayout(_46,"div"),_49;_46.replace(_48);_48.setStyles({height:0,display:"block",position:"relative"}).appendChild(_46);_46.setStyle("display","block");_43=_45._getSpeed(_43);_49=new Y.Anim({node:_48,to:{height:_47.marginTop+_47.offsetHeight+_47.marginBottom},duration:_43,easing:Y.Easing.easeOut});_49.on("end",function(){_46.unwrap();if(_6(_44)){_44.call(_46);}});_45._run(_49);},slideUp:function(_4a,_4b,_4c){var _4d=this,_4e=_4d.get("host"),_4f=_7.getDimensions(_4e),_50=_4d._cloneLayout(_4e,"div"),_51;_4e.replace(_50);_50.setStyles({height:_4f.marginTop+_4f.offsetHeight+_4f.marginBottom,position:"relative"}).appendChild(_4e);_4b=_4d._getSpeed(_4b);_51=new Y.Anim({node:_50,to:{height:0},duration:_4b,easing:Y.Easing.easeIn});_51.on("end",function(){_4e.hide().unwrap();if(_6(_4c)){_4c.call(_4e);}if(_4a){_4e.destroy(true);}});_4d._run(_51);},roll:function(_52,_53,_54){var _55=this,_56=_55.get("host"),_57=_7.getDimensions,_58=0,_59=false,_5a,_5b=0,_5c,_5d,_5e,_5f;if(_3(_52)){_52=_56.all(_52);}if(!_52){return;}_5a=_52.size();if(_5a<2){return;}_52.each(function(nd){var _61=_57(nd).offsetHeight;if(_61>_58){_58=_61;}});_53=_55._getSpeed(_53);setStyles();_56.on({mouseover:function(){_59=true;},mouseout:function(){_59=false;}});window.setTimeout(start,_54);_5e=new Y.Anim({node:_5c,to:{top:-_58},duration:_53,easing:Y.Easing.easeBoth});_5f=new Y.Anim({node:_5d,to:{top:0},duration:_53,easing:Y.Easing.easeBoth});function start(){if(!_59){_5c=_52.item(_5b%_5a);_5d=_52.item((_5b+1)%_5a);_5b=(_5b+1)%_5a;scrolling();}window.setTimeout(start,_54);}function scrolling(){_5d.setStyle("top",_58+1);_5e.set("node",_5c).run();_5f.set("node",_5d).run();}function setStyles(){_56.setStyles({position:"relative",height:_58,overflow:"hidden"});_52.each(function(_62,_63){_62.setStyles({position:"absolute",display:"",top:_63===0?0:_58+1});});}},isInAnimation:function(){return this._running!==0;},_getSpeed:function(_64){var ret=_8.middle;if(_3(_64)&&_8[_64]){ret=_8[_64];}else{if(_4(_64)){ret=_64;}}return ret/1000;},_cloneLayout:function(_66,_67){var _68;_67=_67||_66.get("tagName");_68=$N.create("<"+_67+" class=\"effect-assistance\"></"+_67+">");_68.setStyles({"height":0,"margin":0,"border":"none","padding":0,"background":"none","overflow":"hidden"});return _68;},_setPosition:function(_69){var pos=_69.getStyle(_b);if(pos==="static"){_69.setStyle(_b,"relative");}},_run:function(){var _6b=this.get("host"),i,len=arguments.length,_6e,_6f;if(len===0){return;}_6e=arguments[0];_6f=arguments[len-1];for(i=1;i<len;i++){bridgeAnim(arguments[i-1],arguments[i]);}_6e.on("start",function(){_6b.fire(_c);});_6f.on("end",function(){_6b.fire(_d);});_6e.run();function bridgeAnim(_70,_71){_70.after("end",function(){_71.run();});}}});Y.namespace("mt.plugin").Effect=Effect;},"1.0.0",{requires:["mt-base","mt-uiutil","anim","plugin"]});
M.add("mt-formchecker",function(Y){var $N=Y.Node,_3=Y.io,_4=Y.Object,_5=Y.Lang.isFunction,_6=Y.Lang.isString,_7=Y.Lang.trim;var _8=Y.mt.util;var _9="field-group",_a="field-group--highlight",_b="field-group--type",_c="field-group--ok",_d="field-group--error",_e=".",_f="FormChecker: ",_10=200,_11="success",_12="failure";function FormChecker(){FormChecker.superclass.constructor.apply(this,arguments);}FormChecker.NAME="formChecker";FormChecker.STATUS_INIT=0;FormChecker.STATUS_CHECKING=1;FormChecker.STATUS_OK=2;FormChecker.STATUS_ERROR=3;FormChecker.CLASS_INLINE_TIP="inline-tip";FormChecker.CLASS_BLOCK_TIP="block-tip";FormChecker.CHECK_EMPTY_FN=function(_13){return _7(_13.get("value"))==="";};FormChecker.ATTRS={form:{value:null,setter:"_setForm",writeOnce:true},fields:{value:null},checkEvent:{value:"submit",writeOnce:true},tipClass:{value:FormChecker.CLASS_INLINE_TIP,writeOnce:true},showOkTip:{value:false,writeOnce:true},highlightGroup:{value:false,writeOnce:true},async:{value:false,writeOnce:true}};var _14={initializer:function(){var _15=this,_16=_15.get("form"),_17=_15.get("fields"),_18=_15.get("async"),_19;if(!_16){throw new Error(_f+"\u5fc5\u987b\u8bbe\u7f6eform\u53c2\u6570");}if(!_17){throw new Error(_f+"\u5fc5\u987b\u8bbe\u7f6efields\u53c2\u6570");}_15.publish(_11,{emitFacade:true,defaultFn:_15._defSuccessFn});_15.publish(_12,{emitFacade:true,defaultFn:_15._defFailureFn});_19={emitFacade:true};if(_18){_19.defaultFn=function(){_16.submit();};}_15.publish("submitSuccess",_19);_15.publish("submitFailure",{emitFacade:true});_15.on("fieldsChange",function(){_15._buildFields();});_15._handles={};_15._buildFields();_15._bind();},destructor:function(){_8.detachHandle(this._handles);},_bind:function(){var _1a=this,_1b=_1a._handles,_1c=_1a.get("form"),_1d=_1a.get("async"),_1e=_1d?handleSubmitAsync:handleSubmit;_1b.submit=_1c.on("submit",_1e);_1b.focus=_1c.delegate("focus",function(){var _1f=_1a._getFieldByNode(this);if(!_1f){return;}_1a.focusField(_1f,true);},"input, textarea, select");_1b.blur=_1c.delegate("blur",function(){var _20=_1a._getFieldByNode(this);if(!_20){return;}_1a.blurField(_20,true);},"input, textarea, select");Y.Global.on("formChecker:valueChange",function(o){var _22=_1a._getFieldByNode(o.node);if(!_22){return;}_1a.blurField(_22,true);});_1b.success=_1a.on(_11,function(e){if(_1a._updateUncheckedFields){_1a._updateUncheckedFields(e.field.name);}});_1b.failure=_1a.on(_12,function(e){if(_1a._updateUncheckedFields){_1a._updateUncheckedFields(e.field.name,true);}});function handleSubmit(e){if(!_1a.check()){e.halt(true);_1a.fire("submitFailure");}else{_1a.fire("submitSuccess");Y.Global.fire("formChecker:submitSuccess",{instance:_1a});}}function handleSubmitAsync(e){e.halt();if(_1a._isCheckingAsync){return;}_1a._isCheckingAsync=true;_1a.checkAsync(function(err){_1a._isCheckingAsync=false;if(err){_1a.fire("submitFailure");}else{_1a.fire("submitSuccess");}});}},checkField:function(_28){var _29=this,_2a=_28.node,_2b=_28._async,_2c;if(_28.validateReg){_2c=!_28.validateReg.test(_2a.get("value"));}else{if(_28.validateFn){_2c=_28.validateFn.call(_2a,_2a);}}if(_2c){monitor(_12,_28,_2c);}else{if(!_28.validateAjax){monitor(_11,_28);}else{if(_2b&&_2b.isInProgress()){_2b.abort();}_2b=_3(_28.validateAjax.action,{method:"POST",data:_8.toPostData(_28.validateAjax.dataFn()),on:{success:function(id,o){var res=_8.getEvalRes(o);if(res.status){monitor(_11,_28);}else{monitor(_12,_28,res.msg);}},failure:function(id,o){if(o.statusText&&o.statusText==="abort"){return;}monitor(_12,_28,"\u7f51\u7edc\u6709\u95ee\u9898\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5");}}});if(_2b.isInProgress()){_29._processType(_28,"\u68c0\u67e5\u4e2d...");}_28._async=_2b;}}function monitor(_32,_33,_34){var _35={field:_33};if(_32===_12&&_34){_35.error=_34;}_29.fire(_32,_35);}},check:function(){var _36=this,_37=_36.get("fields"),_38=false;_4.each(_37,function(_39){if(_39.status===FormChecker.STATUS_INIT||_39.status===FormChecker.STATUS_CHECKING){_36.checkField(_39);}if(_39.status===FormChecker.STATUS_ERROR){_38=true;}});return !_38;},checkAsync:function(_3a){var _3b=this,_3c=_3b.get("fields"),_3d={},_3e=false;_4.each(_3c,function(_3f,_40){if(_3f.status===FormChecker.STATUS_INIT||_3f.status===FormChecker.STATUS_CHECKING){_3d[_40]=true;}if(_3f.status===FormChecker.STATUS_ERROR){_3e=true;}});if(_4.isEmpty(_3d)){_3a(_3e);return;}_3b._updateUncheckedFields=function(_41,_42){if(!_3d.hasOwnProperty(_41)){return;}delete _3d[_41];if(_42){_3e=true;}if(_4.isEmpty(_3d)){_3b._updateUncheckedFields=null;_3a(_3e);}};_4.each(_3d,function(_43,_44){_3b.checkField(_3c[_44]);});},focusField:function(_45,_46){var _47=this,_48=_45.node,_49=_45.groupNode,_4a=_47.get("highlightGroup");if(!_46){_48.focus();}if(_48.test("input[type=text], input[type=password], textarea")){if(_4a){_49.addClass(_a);}}_47._processType(_45);},blurField:function(_4b,_4c){var _4d=this,_4e=_4b.node,_4f=_4d.get("highlightGroup"),_50=_4d.get("checkEvent");if(!_4c){_4e.blur();}if(_4f){_4b.groupNode.removeClass(_a);}if(_50==="blur"){window.setTimeout(function(){_4d.checkField(_4b);},_10);}else{_4d.clearTip(_4b);}},_processType:function(_51,tip){_51.status=FormChecker.STATUS_CHECKING;tip=tip||_51.typeTip;if(tip===""){this.clearTip(_51);}else{this._setTip(_51,_b,tip);}},_defSuccessFn:function(e,tip){var _55=e.field,_56=_55.showOkTip;_55.status=FormChecker.STATUS_OK;if(_56){this._setTip(_55,_c,tip||_55.okTip);}else{this.clearTip(_55);}},_defFailureFn:function(e){var _58=e.field,msg=e.error;_58.status=FormChecker.STATUS_ERROR;if(msg===true){msg=_58.errorTip;}this._setTip(_58,_d,msg||_58.errorTip);},_setTip:function(_5a,_5b,tip){var _5d=this,_5e=_5d.get("fields"),_5f=_5d.get("tipClass"),_60,_61;if(_6(_5a)){_5a=_5e[_5a];}_60=_5a.groupNode;_61=_60.one(_e+_5f);if(!_61){_61=$N.create("<span class=\""+_5f+"\"></span>");_60.append(_61);}_5d._replaceGroupClass(_5a,_5b);_61.setHTML(tip).show();},setOkTip:function(_62,tip){this._setTip(_62,_c,tip);},setErrorTip:function(_64,tip){this._setTip(_64,_d,tip);},setTypeTip:function(_66,tip){this._setTip(_66,_b,tip);},clearTip:function(_68){var _69=this,_6a=_69.get("fields"),_6b,_6c;if(_6(_68)){_68=_6a[_68];}_6b=_68.groupNode;_6c=_6b.one(_e+_69.get("tipClass"));if(!_6c){return;}_69._replaceGroupClass(_68);_6c.setHTML("").hide();},_replaceGroupClass:function(_6d,_6e){var _6f=_6d.groupNode;Y.Array.each([_b,_c,_d],function(_70){_6f.removeClass(_70);});if(_6e){_6f.addClass(_6e);}},_getFieldByNode:function(_71){var _72=this.get("fields"),ret=null;_4.some(_72,function(_74){if(_74.node===_71){ret=_74;return true;}});return ret;},addField:function(_75,_76){var _77=this,_78=_77.get("fields"),_79=_77.get("showOkTip");var _7a=Y.one(_76.node),_7b=_7a&&_7a.ancestor(_e+_9);if(!_7a||!_7b){return false;}Y.mix(_76,{name:_75,node:_7a,groupNode:_7b,status:FormChecker.STATUS_INIT,showOkTip:_76.hasOwnProperty("showOkTip")?_76.showOkTip:_79},true);if(_76.validateAjax&&!_5(_76.validateAjax.dataFn)){_76.validateAjax.dataFn=function(){var ret={};ret[_7a.get("name")]=_7a.get("value");return ret;};}_78[_75]=_76;return true;},addFields:function(_7d){var _7e=this,_7f,ret=true;for(_7f in _7d){if(_7d.hasOwnProperty(_7f)){ret=_7e.addField(_7f,_7d[_7f])&&ret;}}return ret;},removeField:function(_81){var _82=this,_83=_82.get("fields"),_84=_6(_81)?_81:_81.name;if(_83.hasOwnProperty(_84)){delete _83[_84];return true;}return false;},resetField:function(_85){var _86=this,_87=_86.get("fields");if(_6(_85)){_85=_87[_85];}_85.status=FormChecker.STATUS_INIT;_86.clearTip(_85);},_buildFields:function(){var _88=this,_89=_88.get("fields");_4.each(_89,function(_8a,_8b){var ret=_88.addField(_8b,_8a);if(!ret){delete _89[_8b];}});},_setForm:function(val){return Y.one(val);}};Y.extend(FormChecker,Y.Base,_14);Y.mt.FormChecker=FormChecker;},"1.0.0",{requires:["mt-base","io-base","base-base"]});
M.add("mt-dialog",function(Y){var _2=Y.UA.ie,_3=(_2===6),_4=Y.Lang.isString,_5=Y.Lang.isNumber;var _6=Y.mt.util;var _7={CLOSE:"close",OPEN:"open"};function Dialog(){var _8=arguments[0],_9=Dialog._instances[_8.id];if(_9 instanceof Dialog){delete _8.id;_8.autoHide=_8.autoHide||false;_9.setAttrs(_8);return _9;}else{Dialog._instances[_8.id]=this;Dialog.superclass.constructor.apply(this,arguments);this.config=_8;return this;}}Dialog._instances={};Dialog.NAME="mt-dialog";Dialog.MASK_ID="mt-overlay-mask";Dialog.IFRAME_ID="mt-overlay-iframe";Dialog.UNDERLAY_CLASS="mt-overlay-underlay";Dialog.OVERLAY_CONTAINER_CLASS="mt-overlay-container";Dialog.TITLE_TPL="<h3 class=\"head\">{title}<span class=\"close\">\u5173\u95ed</span></h3><div class=\"body\"><p class=\"error\" style=\"display:none\">&nbsp;</p>{content}</div>";Dialog.NO_TITLE_TPL="<a class=\"close no-title\" hidefocus=\"true\">\u5173\u95ed</a><div class=\"body\"><p class=\"error\" style=\"display:none\">&nbsp;</p>{content}</div>";Dialog.ATTRS={id:{value:null,writeOnce:true},width:{value:"400px",setter:"_setWidth"},zIndex:{value:102},align:{value:null},centered:{value:true},modal:{value:true},autoHide:{value:false},title:{value:""},content:{value:""}};var _a={initializer:function(){var _b=this;_b._timer=null;_b._dialog=null;_b._scrollHandle=null;_b._initAttrEventListener();_b.publish("open",{emitFacade:true,defaultFn:_b._defOpenFn});_b.publish("close",{emitFacade:true,defaultFn:_b._defCloseFn});_b._initDialog();},destructor:function(){},_initDialog:function(){var _c=this;var _d=_c.getAttrs(["width","zIndex","align","centered"]);_d["visible"]=false;_c._dialog=new Y.Overlay(_d);_c._initOverlay();},_initAttrEventListener:function(){var _e=this,_f=Y.mt.macro.key;_e.on("widthChange",function(e){this._dialog.set("width",e.newVal);_e.resizeUnderlay();});_e.on("titleChange",function(e){_e._fillTemplate({title:e.newVal});});_e.on("contentChange",function(e){_e._fillTemplate({content:e.newVal});});_e.on("centeredChange",function(e){this._dialog.set("centered",e.newVal);});_e.on("alignChange",function(e){this._dialog.set("align",e.newVal);});_e.on("autoHideChange",function(e){if(e.newVal){_e._timer=window.setTimeout(function(){_e.close();},parseInt(e.newVal,10)*1000);}});Y.one("body").on("keydown",function(e){var _17=e.keyCode;if(_e._status===_7.OPEN&&_17===_f.ESC){_e.fire("close",{id:_e.get("id")});}});},_fillTemplate:function(_18){var _19=this,_1a,_1b,_1c;_18=_18||{};_1a=_18.title||_19.get("title");_1b=_18.content||_19.get("content");if(!_1a&&!_1b){return;}if(_1a){_1c=Y.Lang.sub(Dialog.TITLE_TPL,{title:_1a,content:_1b});}else{_1c=Y.Lang.sub(Dialog.NO_TITLE_TPL,{content:_1b});}_19._dialog.set("bodyContent","<div class=\"mt-dialog\">"+_1c+"</div>");_19.set("centered",true);_19.resizeUnderlay();},_initOverlay:function(){var _1d;var _1e=Y.one(document.body);var _1f=this,_20=_1f.get("modal"),_21=_1f.get("zIndex"),_22=_1f.get("id");var _23=_1f._dialog;var _24=_1e.one("#"+Dialog.IFRAME_ID);var _25=_1e.one("#"+Dialog.MASK_ID);if(_20){if(!_24){_24=Y.Node.create("<iframe id=\""+Dialog.IFRAME_ID+"\"></iframe>");_1e.prepend(_24);_25=Y.Node.create("<div id=\""+Dialog.MASK_ID+"\"></div>");_24.insert(_25,"before");}_24.setStyles({width:_1e.get("docWidth"),height:_1e.get("docHeight"),zIndex:parseInt(_21,10)-2,visibility:"hidden"});_25.setStyles({width:_1e.get("docWidth"),height:_1e.get("docHeight"),zIndex:parseInt(_21,10)-1,visibility:"hidden"});}_1d=Y.Node.create("<div id=\""+_22+"\" class=\""+Dialog.OVERLAY_CONTAINER_CLASS+"\"></div>");if(_24){_24.insert(_1d,"after");}else{_1e.prepend(_1d);}_23.render(_1d);_1f._fillTemplate();if(!_1d.one("."+Dialog.UNDERLAY_CLASS)){_1d.get("firstChild").append("<div class=\""+Dialog.UNDERLAY_CLASS+"\"></div>");}_1d.delegate("click",function(){_1f.close();},".close");},open:function(){var _26=this,_27=_26.get("id");_26.fire("open",{id:_27});},_defOpenFn:function(){var _28=Y.one(document);var _29=_28.one("#"+Dialog.IFRAME_ID);var _2a=_28.one("#"+Dialog.MASK_ID);var _2b=this,_2c=_2b._dialog,_2d=_2b.get("centered"),_2e=_2b.get("autoHide");var _2f=Y.one(window);_29.setStyle("visibility","visible");_2a.setStyle("visibility","visible");_2c.show();_2b._status=_7.OPEN;if(_2e){_2b.set("autoHide",_2e);}if(_2d){_2b.set("centered",true);_2b._scrollHandle=_2f.on("scroll",_6.throttle(function(){_2b.set("centered",true);},100));}},close:function(){var _30=this,_31=_30.get("id");_30.fire("close",{id:_31});},_defCloseFn:function(){var _32=Y.one(document.body);var _33=_32.one("#"+Dialog.MASK_ID);var _34=_32.one("#"+Dialog.IFRAME_ID);var _35=this,_36=_35.get("modal"),_37=_35.get("centered"),_38=_35.get("id");var _39=_35._dialog;var _3a=_32.one("#"+_38);_39.hide();_35._status=_7.CLOSE;if(_36){_33.setStyle("visibility","hidden");_34.setStyle("visibility","hidden");}if(_37&&_35._scrollHandle){_35._scrollHandle.detach();}if(_3a){_3a.all(".close").each(function(nd){nd.purge();});}window.clearTimeout(_35._timer);if(_35.config.onClose){_35.config.onClose(_35);}},resizeUnderlay:function(){var _3c=this,_3d=_3c.get("id");if(_3||(_2===7&&document.compatMode==="BackCompat")){var _3e=Y.one("#"+_3d+" ."+Dialog.UNDERLAY_CLASS);if(!_3e){return;}var _3f=_3e.get("parentNode");_3e.setStyle("width",parseFloat(_3f.getComputedStyle("width"))+6+"px");_3e.setStyle("height",parseFloat(_3f.getComputedStyle("height"))+6+"px");}},one:function(_40){var _41=this,_42=Y.one("#"+_41.get("id"));return _42.one(_40);},all:function(_43){var _44=this,_45=Y.one("#"+_44.get("id"));return _45.all(_43);},showError:function(_46){var _47=this,_48;_48=_47.one(".body > .error");_48.setHTML(_46).show();},clearError:function(){var _49=this,_4a;_4a=_49.one(".body > .error");_4a.hide();},showResult:function(o){var _4c="350px",_4d="<div class=\"result-box pngfix {className}\"><i></i><h5>{title}</h5>{tip}</div>{extra}",_4e={tip:{className:"tip",title:"",extra:""},success:{className:"success",title:"\u64cd\u4f5c\u6210\u529f",extra:""},failure:{className:"failure",title:"\u64cd\u4f5c\u5931\u8d25",extra:""}};Y.mix(o,_4e[o.type||"success"]);if(o.tip){o.tip="<p>"+o.tip+"</p>";}else{o.tip="";o.className+=" no-tip";}this.setAttrs({width:o["width"]||_4c,content:Y.Lang.sub(_4d,o)});},_setWidth:function(val){if(_4(val)){return val;}if(_5(val)){return val+"px";}return "400px";}};Y.extend(Dialog,Y.Base,_a);Y.mt.Dialog=Dialog;},"1.0.0",{requires:["mt-base","overlay"]});
M.add("mt-log",function(Y){var _2=Y.mt.util;M.CDN_DOMAIN_HOST=M.CDN_DOMAIN_HOST||"meituan.net";var _3={config:{www:function(_4){var _5={"/":true};if(_5[_4]){return 1;}if((/^\/deal\/[\s\S]+\.html$/).test(_4)){return 2;}return 0;},ecom:function(_6){if(_6==="/coupon/batchconsume"){return 7;}if((/\/coupon\/[\w]*/).test(_6)){return 6;}return 0;}},getPageID:function(){var id=0,_8=window.location.pathname;Y.Object.some(this.config,function(_9){id=_9(_8);return id;});return id;}};Y.namespace("mt.Performance");Y.mt.Performance={report:function(){var _a={};M.TimeTracker=M.TimeTracker||{};_a.rt=M.TimeTracker.reqtime||0;_a.st=M.TimeTracker.start||0;_a.dt=M.TimeTracker.domReady||0;_a.lt=M.TimeTracker.load||0;_a.fst=M.TimeTracker.fst||0;_a.page=_3.getPageID();Y.mix(_a,this.getTimingData());Y.mix(_a,this.getNavigationData());return _a;},DATA_KEYS:["navigationStart","unloadEventStart","unloadEventEnd","redirectStart","redirectEnd","fetchStart","domainLookupStart","domainLookupEnd","connectStart","connectEnd","secureConnectionStart","requestStart","responseStart","responseEnd","domLoading","domInteractive","domContentLoadedEventStart","domContentLoadedEventEnd","domComplete","loadEventStart","loadEventEnd"],getTimingData:function(){var _b=window.performance&&window.performance.timing;if(!_b){return null;}var _c=[],_d,_e=Number.POSITIVE_INFINITY,_f=this.DATA_KEYS,_10={};for(_d=0;_d<_f.length;_d++){if(_b[_f[_d]]){_c[_d]=_b[_f[_d]];if(_c[_d]<_e){_e=_c[_d];}}else{_c[_d]=-1;}}for(_d=0;_d<_f.length;_d++){if(_c[_d]>0){_c[_d]-=_e;}}_10["pt_start"]=_e;_10["pt_index"]=_c.join(",");return _10;},getNavigationData:function(){var _11=window.performance&&window.performance.navigation;if(!_11){return null;}var _12={};_12["pn_redirect"]=_11.redirectCount;_12["pn_type"]=_11.type;return _12;}};var _13=1,_14=2,_15=3;Y.namespace("mt.log");Y.mt.log={loadPage:function(_16){this.blog({domainHost:_16||"sankuai.com"});},blog:function(_17){var _18=0,_19=false,_1a=100,_1b=100,_1c=15000,_1d=15000,_1e=1,_1f=2,_20=3;_17=_17||{};Y.mix(_17,{needPerformance:true});if(_17.domainHost){this.domainHost=_17.domainHost;}if(_17.hasGA){checkGALoadStatus();}else{checkLoadStatus();}_2.addUnloadListener(function(){beacon(_1f);});function checkLoadStatus(){if(M.TimeTracker&&M.TimeTracker["domReady"]&&M.TimeTracker["load"]){beacon();}else{if(_18>_1d){beacon(_20);}else{window.setTimeout(function(){checkLoadStatus();},_1a);_18+=_1a;}}}function checkGALoadStatus(){if(window._gat&&window._gat._getTracker){checkLoadStatus();}else{if(_18>_1c){beacon(_1e);}else{window.setTimeout(function(){checkGALoadStatus();},_1b);_18+=_1b;}}}function beacon(_21){if(_19){return;}var _22={};_22["expire"]=_21||0;if(M.PAGE_VIEW_DATA){Y.mix(_22,M.PAGE_VIEW_DATA);}if(_17.needPerformance){Y.mix(_22,Y.mt.Performance.report());}if(_17.extra){Y.mix(_22,_17.extra);}Y.mt.log.logPageview(M.PAGE_VIEW,_22);_19=true;}},logPageview:function(url,_24){var o={url:url||window.location.pathname,domain:window.location.host};if(_24){Y.mix(o,_24);}this.beacon(o,_14);},logEvent:function(_26,_27,_28,_29){var o={ca:_26,ac:_27,la:_28,c:document.cookie};if(_29){Y.mix(o,_29);}this.beacon(o,_15);},beacon:function(o,_2c){var ts=(new Date()).getTime(),b=M.Env._beacon[ts]=new Image();Y.mix(o,{time:ts+(M.DELTA_TIME||0)});if(M.HTTP_REFERER){o.r=M.HTTP_REFERER;}b.src=this.getUri(_2c)+"?"+_2.toPostData(o);},getUri:function(_2f){var _30=window.location.protocol,_31=_30==="https:"?M.DOMAIN_HOST:M.CDN_DOMAIN_HOST,uri=false;_2f=_2f||_13;switch(_2f){case _13:uri=_30+"//fe."+_31+"/_.gif";break;case _14:_31=this.domainHost||M.DOMAIN_HOST;uri=_30+"//b."+_31+"/_.gif";break;case _15:uri=_30+"//b."+_31+"/_mt.gif";break;default:break;}return uri;}};var _33="mtevent",_34="gaevent",_35="mod";Y.namespace("mt.Tracker");Y.mt.Tracker={init:function(){var _36={mtevent:this.trackMTEvent,gaevent:this.trackGACustomEvent,gaexternal:this.trackGAExternalLink,mtmodule:this.trackMTModule};Y.Array.each(arguments,function(_37){_36[_37]();});},trackMTModule:function(){var _38=Y.all("[data-"+_35+"]"),ca="UserAction",ac="Click",la="module/click";_38.each(function(nd){var id=_2.data(nd,_35);nd.delegate("click",function(){Y.mt.log.logEvent(ca,ac,la,{pm:id});},"a");});},trackMTEvent:function(){var _3e=Y.one(document.body);_3e.delegate("click",function(){Y.mt.Tracker.trackEventByNode(this);},"[data-"+_33+"]");},trackEventByNode:function(nd){var _40=_2.decodeAttr(nd,_33),_41,_42,_43;if(!_40){return;}_41=_40.ca;_42=_40.ac;_43=_40.la;delete _40.ca;delete _40.ac;delete _40.la;Y.mt.log.logEvent(_41,_42,_43,_40);},trackGACustomEvent:function(){var _44=Y.one(document.body),_45=_34;_44.delegate("click",function(){var _46=this.getAttribute(_45);if(!_46){return;}var _47=_46.split("|");if(_47.length<3){_47.unshift("InnerLink","Click");}if(!_47[2]&&this.get("href")){_47[2]=this.get("href").replace("http://","");}_gaq.push(["_trackEvent"].concat(_47));},"["+_45+"]");},trackGAExternalLink:function(){var _48=Y.one(document.body);_48.delegate("click",function(){var _49=this.get("href"),reg=/^(http:\/\/|mailto:)/,_4b,_4c;if(_49&&reg.test(_49)){_49=_49.replace("http://","");_4b=_49.indexOf("?");_4c=this.getAttribute("galabel");if(_4b>0){_49=_49.substring(0,_4b);}if(/\.(meituan|mt|sankuai)\.com/.test(_49)){return;}if(_4c){_49+="#label="+_4c;}_gaq.push(["_trackEvent","OutLink","Click",_49]);}},"a");}};},"1.0.0",{requires:["mt-base"]});
M.add("www-base",function(Y){var $N=Y.Node,_3=Y.io,_4=Y.UA.ie,_5=(_4===6),_6=Y.UA.webkit,_7=Y.Lang.trim;var _8=Y.mt.util,_9=_8.Cookie,_a=Y.mt.FormChecker,_b=Y.mt.Dialog;var _c=Y.mt.macro;var _d="email-subscribed-dialog";Y.namespace("mt.www");Y.mt.www={init:function(){this.initNav();this.CartEx.init();this.initSearch();this.SysMsg.init();this.initAccountMenu();this.initVipBubble();this.initNavHistory();this.initNavMore();Y.mt.Tracker.init("gaevent","mtevent","gaexternal","mtmodule");this.removeUnionCookie();Y.mt.log.blog({hasGA:true});this.initFavorite();this.initSubscribe();this.MTracker.init();this.toggleABTest();Y.mt.widget.init();this.delayForTracking(".J-nav__list");this.delayForTracking("#filter");this.initToolTip();},initToolTip:function(){var _e=Y.one(document),_f=_e.one("body"),_10=null,_11="uix-tooltip",_12="."+_11,_13="uix-tooltip-tip",_14="tooltip-text",_15="data-"+_14;_e.delegate("hover",function(){if(_10){_f.removeChild(_10);_10=null;}show(this);},function(){if(!_10){return;}this.setAttribute("title",_8.data(this,_14));_f.removeChild(_10);_10=null;},_12);function show(nd){var _17=_8.data(nd,_14),tip=_17||nd.get("title");if(!tip){return;}var _19="<div class=\""+_13+"\" style=\"position:absolute; top:0; left:0; visibility:hidden;\"><div class=\"inner\">"+tip+"</div></div>";_10=_f.appendChild(_19);if(!setPos(_10,nd)){_f.removeChild(_10);_10=null;return;}if(!_17){nd.setAttribute(_15,tip);}nd.setAttribute("title","");}function setPos(_1a,_1b){var _1c=_1b.get("docScrollX"),_1d=_1b.get("docScrollY"),_1e=_1b.get("winWidth"),_1f=_1b.get("winHeight"),_20=_1b.getXY(),_21=_20[0],_22=_20[1],_23=_1b.get("offsetWidth"),_24=_1b.get("offsetHeight"),_25=_1a.get("offsetHeight"),_26=_1a.get("offsetWidth"),_27=10,top=0,_29=0,_2a={top:top,left:_29,visibility:"visible"},ret="above";if(_26>_1e||_25>_1f){return "";}top=_22-_25-_27;if(top<_1d){ret="below";top=_22+_24+_27;if(top+_25>_1d+_1f){return false;}}_29=_21-(_26-_23)/2;if(_29<_1c){_29=_1c;if(_29+_26/2>_21+_23/2){return false;}}else{if(_29+_26>_1c+_1e){_29=_1c+_1e-_26;if(_29+_26/2<_21){return false;}}}_1a.addClass(_13+"--"+ret);if(ret==="above"){_1a.appendChild("<div class=\"indication-arrow indication-arrow--down invisible\"></div>"+"<div class=\"indication-arrow indication-arrow--down visible\"></div>");}else{_1a.appendChild("<div class=\"indication-arrow indication-arrow--up visible\"></div>"+"<div class=\"indication-arrow indication-arrow--up invisible\"></div>");}_2a.top=top;_2a.left=_29;_1a.setStyles(_2a);return true;}},initNav:function(){var _2c=Y.one(".J-nav__trigger"),_2d=Y.one(".J-nav__list"),_2e="nav-unfolded",_2f="nav-hover",_30="nav-active",_31=".J-nav-level2",_32=300,_33=100,_34=false,_35=false,_36=false,_37=false,_38=null,_39=null;if(!_2c||!_2d){return;}if(_2d.getStyle("display")!=="none"){_34=true;initCates();}if(!_34){_2c.on("hover",function(){_35=true;window.setTimeout(function(){if(!_35){return;}if(!_37){showNav();}},_32);},function(){_35=false;window.setTimeout(function(){if(_35||_36){return;}hideNav();},_32);});}function initCates(){var _3a=".J-nav-item",_3b=null,x1=_2d.getX()+_2d.get("offsetWidth"),y1=_2d.getY(),y2=y1+_2d.get("offsetHeight"),_3f={x:x1,y:y1},_40={x:x1,y:y2},_41=Y.one(document),_42=null,_43=true,_44={},_45={},_46={},pts=[_44,_45,_3f,_40],_48=null;_38=_2d.on("hover",function(){_36=true;if(!_48){_48=_41.on("mousemove",function(e){_46.x=_45.x;_46.y=_45.y;_45.x=_44.x;_45.y=_44.y;_44.x=e.pageX;_44.y=e.pageY;_43=false;window.clearTimeout(_42);_42=window.setTimeout(function(){_43=true;},_32);});}},function(){_36=false;if(_48){_48.detach();_48=null;}if(_34){return;}window.setTimeout(function(){if(_35||_36){return;}hideNav();},_32);});_39=_2d.delegate("hover",over,out,_3a);function over(){this.addClass(_2f);if(!_2d.one("."+_30)){show(this);}}function out(){this.removeClass(_2f);if(_3b){return;}var _4a=this;_3b=window.setTimeout(check,getDelay());function check(){var _4b=_2d.one("."+_2f);window.clearTimeout(_3b);_3b=null;if(_4b===_4a){return;}var _4c=getDelay();if(_4c>0){_3b=window.setTimeout(check,_4c);return;}if(!_4b){window.setTimeout(function(){switchNav();},_32);}else{switchNav();}}}function getDelay(){if(_43){return 0;}if(_44.x===_45.x&&Math.abs(_44.y-_45.y)<2&&_46.x&&_44.x>_46.x){return _33;}var b0=(pts[2].x-pts[1].x)*(pts[3].y-pts[1].y)-(pts[3].x-pts[1].x)*(pts[2].y-pts[1].y),b1=((pts[2].x-pts[0].x)*(pts[3].y-pts[0].y)-(pts[3].x-pts[0].x)*(pts[2].y-pts[0].y))/b0,b2=((pts[3].x-pts[0].x)*(pts[1].y-pts[0].y)-(pts[1].x-pts[0].x)*(pts[3].y-pts[0].y))/b0,b3=((pts[1].x-pts[0].x)*(pts[2].y-pts[0].y)-(pts[2].x-pts[0].x)*(pts[1].y-pts[0].y))/b0;return b1>0&&b2>0&&b3>0?_32:0;}function switchNav(){var _51=_2d.one("."+_30),_52=_2d.one("."+_2f);if(_52===_51){return;}if(_51){hide(_51);}if(_52){show(_52);}}function show(nd){var _54=nd.one(_31),_55,_56,err=-10;nd.addClass(_30);if(_54){_54.setStyle("visibility","hidden");_54.show();pts[2].y=nd.getY();pts[3].y=pts[2].y+_54.get("offsetHeight");_55=y2-pts[3].y;if(_55<0){_56=pts[2].y+nd.get("offsetHeight");_55=y2+err>_56?_55+err:_55;_54.setStyle("top",_55);pts[2].y+=_55;}else{_54.setStyle("top",0);}_54.setStyle("visibility","visible");}if(_4){_8.reflow(_2d);}}function hide(nd){var _59=nd.one(_31);nd.removeClass(_30);if(_59){_59.hide();}}}function hideNav(){_2c.removeClass(_2e);_2d.hide();deCates();_37=false;}function showNav(){_2c.addClass(_2e);_2d.show();initCates();_37=true;}function deCates(){if(_38){_38.detach();_38=null;}if(_39){_39.detach();_39=null;}}},toggleABTest:function(){var _5a=Y.one(".J-index-toggle");if(!_5a){return;}var _5b=!!(Y.one(".site-fs")),_5c=_5b?Y.one(".site-fs"):Y.one("#filter"),top=_5b?182:146,_5e=_5b?980:960,x=-1,_60=Y.one(".J-toggle-abtest"),_61="abt",_62=_8.Cookie;if(!_5c){return;}adjustPos();_5a.setStyle("top",top);_5a.show();Y.one(window).on("resize",_8.throttle(adjustPos,100));if(_60){_60.on("click",function(e){e.preventDefault();var _64=_62.get(_61);if(!_64){return;}var _65=_62.getExpiresDate(30*365,0,0);if(_5b){_62.set(_61,_64.slice(0,-1)+"F",_65,"/","."+M.DOMAIN_HOST);}else{_62.set(_61,_64.slice(0,-1)+"E",_65,"/","."+M.DOMAIN_HOST);}window.setTimeout(function(){window.location.href="/";},200);});}function adjustPos(){var nx=_5c.getX();if(x!==nx){x=nx;_5a.setStyle("left",x+_5e+10);}}},delayForTracking:function(_67){_67=Y.one(_67);if(!_67||_4){return;}var _68=200;_67.delegate("click",function(e){var _6a=this.get("href"),_6b=this.getAttribute("target");if(_6b==="_blank"){return;}e.preventDefault();window.setTimeout(function(){window.location.href=_6a;},_68);},"a");},initRecoMovies:function(_6c){var _6d=Y.one(_6c.ndOptionContainer);if(!_6d){return;}var _6e=_6d.all(_6c.options),_6f=Y.one(_6c.ndContentContainer),_70=_6f.all(_6c.contents),_71="opt",_72="data-opt",_73="opt-unmarked",_74="."+_73,_75=_6c.selectedOption,_76="."+_75,_77=".mt-slider",_78=this,_79=null;_70.each(function(_7a){if(!_8.data(_7a,_71)){_7a.addClass(_73);}});_6e.some(function(_7b,_7c){var _7d=_6f.one(_74);if(!_7d){return true;}_7d.removeClass(_73);_8.data(_7d,_71,_7c);});_6d.delegate("click",function(e){if(this.hasClass(_75)){return;}e.preventDefault();var _7f=this,_80=_6e.indexOf(_7f),_81="["+_72+"=\""+_80+"\"]",_82=_6f.one(_81),_83=_6d.one(_76),_84=_6e.indexOf(_83),_85="["+_72+"=\""+_84+"\"]";if(!_82){setContent(_80,_84);}else{_83.removeClass(_75);_7f.addClass(_75);_6f.one(_85).ancestor(_77).hide();_82.ancestor(_77).show();}},_6c.options);function setContent(_86,_87){var _88="["+_72+"=\""+_87+"\"]";if(_79&&_79.isInProgress()){return;}_79=_3("/movie/gethotorcomingmovie",{method:"post",on:{success:function(id,o){var res=_8.getEvalRes(o),_8c;if(res.status){_6e.item(_87).removeClass(_75);_6e.item(_86).addClass(_75);_6f.one(_88).ancestor(_77).hide();_8c=_6f.appendChild(res.data);_8.data(_8c,_71,_86);_78.initRecoSlides(_8c,"blacksquare circle",{duration:500,interval:10000});Y.mt.www.Index.showGeoMask(".recommend-movies__slides-w",".reco-movieinfo");}}}});}},initRecoSlides:function(_8d,_8e,_8f){var _90=Y.one(_8d);if(!_90){return;}var _91={srcNode:_90,effect:"slideHorizontal",duration:400,lazyloading:true,pnAutoHide:true,sheetContainer:_90.one(".reco-slides__slides")},_92;if(_8f){Y.mix(_91,_8f,true);}if(/\bcircle\b/.test(_8e)){_91.triggerContainer=_90.one(".reco-slides__switch");}else{if(/\bnumber\b/.test(_8e)){_91.triggerContainerEx=_90.one(".reco-slides__tips");}}if(/\bblacksquare\b/.test(_8e)){_91.previous=_90.one(".reco-slides__roll--blacksquare--previous");_91.next=_90.one(".reco-slides__roll--blacksquare--next");}else{if(/\bgreyrect\b/.test(_8e)){_91.previous=_90.one(".reco-slides__roll--greyrect--previous");_91.next=_90.one(".reco-slides__roll--greyrect--next");_91.pnAutoHide=false;}}_92=new Y.mt.widget.Slider(_91);_92.render();},trackPageScroll:function(la){_8.addLoadListener(track);function track(){var _94=Y.one(window),ca="UserAction",ac="Scroll",_97={vh:0,vt:_94.get("docScrollY"),dh:0};_94.on("scroll",_8.throttle(handleScroll,100));_8.addUnloadListener(handleUnload);function handleScroll(){var _98=_94.get("docScrollY");if(_98>_97.vt){_97.vt=_98;}}function handleUnload(){_97.vh=_94.get("winHeight");_97.dh=_94.get("docHeight");Y.mt.log.logEvent(ca,ac,la,_97);}}},selectAndCopy:function(_99,_9a,msg){_99=Y.one(_99);_9a=Y.one(_9a);if(!_99||!_9a){return;}_99.on("click",copy);_9a.on("click",copy);function copy(){if(_4){try{window.clipboardData.setData("Text",_99.get("value"));alert(msg||"\u590d\u5236\u6210\u529f\uff0c\u4f60\u53ef\u4ee5\u7c98\u5e16\u5230MSN\u6216QQ\u4e2d\u53d1\u7ed9\u597d\u53cb\u3002");}catch(e){}}window.setTimeout(function(){_99.select();},0);}},removeUnionCookie:function(){if(window.top!==window.self){return;}var _9c=_8.Cookie,_9d="us",_9e="tjxb",_9f=_9c.get(_9d);if(_9f===_9e){_9c.remove(_9d,"/","."+M.DOMAIN_HOST);}},refreshCaptcha:function(_a0,_a1){_a0=Y.one(_a0);if(!_a0){return null;}var _a2=_8.field(_a0,"captcha"),_a3=_a2&&_a2.next("a"),_a4=_a2&&_a2.next("img");if(!_a2||!_a3||!_a4){return null;}if(_a1){update();}_a3.on("click",function(e){e.halt();update();});_a4.on("click",function(){update();});function update(){var src=_a4.get("src").replace(/(\?0\.\d+)?$/,"");_a4.set("src",src+"?"+Math.random());_a2.set("value","");}return {update:update};},initBanner:function(_a7,_a8,_a9,_aa){_a7=Y.one(_a7);if(!_a7){return;}_a8=_a7.one(_a8||".trigger");_a9=_a7.one(_a9||".sheet");var _ab=_a8&&_a8.all("> li"),_ac=_a9&&_a9.all("> li"),_ad="top-banner";_a7.delegate("click",function(e){e.halt();var _af=_9.getExpiresDate(1,0,0);_a7.remove(true);_9.set(_ad,"1",_af,"/","."+M.DOMAIN_HOST);},".close");if(_ac&&_ac.size()>1){createSlider();}function createSlider(){var _b0;if(!_ab||_ab.isEmpty()){createTrigger();}_b0={srcNode:_a7,effect:"slideUp",interval:5000,sheetContainer:_a9,triggerContainer:_a8};_aa=_aa||{};Y.mix(_aa,_b0);Y.use("w-slider",function(Y){var _b2=new Y.mt.widget.Slider(_aa);_b2.render();});}function createTrigger(){var i,len,_b5=[];for(i=0,len=_ac.size();i<len;++i){_b5.push("<li>"+(i+1)+"</li>");}_a7.appendChild("<ul class=\"trigger\" style=\"display:none\">"+_b5.join("")+"</ul>");_a8=_a7.one(".trigger");_ab=_a8.all("li");}},toggleByLink:function(_b6,_b7,_b8){_b6=Y.one(_b6);_b7=Y.one(_b7);if(!_b6||!_b7||!_b6.test("a")){return;}_b8=_b8||{};Y.mix(_b8,{openClass:"unfold-lnk",closeClass:"fold-lnk",effect:true});if(_b8.effect){_b7.plug(Y.mt.plugin.Effect);}_b6.on("click",function(e){e.halt();if(_b6.hasClass(_b8.closeClass)){_b6.replaceClass(_b8.closeClass,_b8.openClass);if(_b8.effect){_b7.effect.fadeOut();}else{_b7.show();}if(_b8.openText){_b6.setHTML(_b8.openText);}}else{_b6.replaceClass(_b8.openClass,_b8.closeClass);if(_b8.effect){_b7.effect.fadeIn();}else{_b7.hide();}if(_b8.closeText){_b6.setHTML(_b8.closeText);}}});},tabView:function(_ba,_bb,_bc){_ba=Y.one(_ba);if(!_ba){return;}var _bd=_ba.all(_bb),_be=_ba.all(_bc),_bf="current";if(_bd.size()!==_be.size()){return;}_ba.delegate("click",function(){var _c0=_bd.indexOf(this);_bd.removeClass(_bf);_bd.item(_c0).addClass(_bf);_be.hide();_be.item(_c0).show();},_bb);},goTop:function(_c1){var _c2,_c3;_c1=_c1||{};Y.mix(_c1,{mainAreaWidth:960,bottomEdge:"#ft"});_c3=Y.one("body");_c2=$N.create("<a id=\"J-go-top\" class=\"go-top pngfix\" hidefocus=\"true\" href=\"javascript:void(0)\" style=\"display:none\">\u56de\u9876\u90e8</a>");_c3.prepend(_c2);this.smoothScroll(_c2,"a");Y.use("w-fixedbar",function(Y){new Y.mt.widget.Fixedbar({node:_c2,canDisappear:true,mainAreaWidth:_c1.mainAreaWidth,bottomEdge:_c1.bottomEdge,hAlign:"left",vAlign:"bottom",vMinScrollTop:140,vBottomOffset:20});});},smoothScroll:function(_c5,_c6){_c5=Y.one(_c5);_c6=_c6||"a";_c5.delegate("click",function(e){e.preventDefault();var _c8=_6?document.body:document.documentElement,_c9=_8.data(e.target,"anchor"),_ca=_c9&&Y.one(_c9),_cb=0;if(_ca){_cb=_ca.getY();}if(_4===8){window.scrollTo(0,_cb);}else{new Y.Anim({node:_c8,duration:Y.mt.lang.clamp(_c5.get("docScrollY")/1000,0.2,0.6),to:{scroll:[0,_cb]},easing:"easeOutStrong"}).run();}},_c6);},closeClientTips:function(_cc){_cc=Y.one(_cc);if(!_cc){return;}_cc.delegate("click",function(){_3("/tips/closeclienttips",{method:"POST"});},".close");},showClientTip:function(tip){var _ce=Y.one("#hd a.mobile"),_cf="clientClose",_d0=_8.Cookie.get(_cf),_d1,_d2;if(_d0||!_ce){return;}_d1=_8.Cookie.getExpiresDate(1,0,0);Y.use("w-bubbletip",function(Y){_d2=new Y.mt.widget.BubbleTip({node:_ce,id:"client-bubble-tip",tip:tip,alignment:"bottom-left-align",show:true,distance:0,forceClose:true});_d2.on("close",function(){_8.Cookie.set(_cf,"1",_d1,"/");_d2.destructor();});_d2.render();});},initSearch:function(_d4){var _d5=(_d4&&Y.one(_d4))||Y.one("#hd")||Y.one("#site-mast")||Y.one("body"),_d6=_d5.one(".J-search-form");if(!_d6){return;}var _d7=_8.field(_d6,"w"),_d8,_d9=_d5.one(".J-search-suggest"),_da=_d9.one(".J-search-suggest-list"),_db=[],_dc=0,_dd=1,_de=2,_df=3,_e0=_dc,_e1=false,_e2,_e3={},_e4="search-suggest__item",_e5="search-suggest__item--over",_e6="search-suggest__item--history",_e7=10,_e8=false,_e9=false,_ea,_eb=200;var _ec="sh",_ed=5,_ee="<li class=\""+_e4+" {tipClass}\"><a href=\"javascript:void(0)\" class=\"remove\" data-tip=\"{tipContent}\">\u5220\u9664</a>{tipContent}</li>",_ef=_9.get(_ec),_f0=_9.getExpiresDate(30,0,0),_f1=_ef?Y.JSON.parse(_ef):[],_f2="";var _f3={add:function(_f4){var _f5=Y.some(_f1,function(_f6,i){var idx=Y.Array.indexOf(_f6[1],_f4);if(idx>=0){_f6[1].splice(idx,1);_f6[1].push(_f4);_f1.splice(i,1);_f1.push(_f6);_f3.update();return true;}});if(_f5){return;}if(_f1.length>=_ed){_f1.shift();}var _f9=-1;Y.each(_f1,function(_fa,_fb){if(_fa[0]===_f2){_f9=_fb;}});if(_f9>-1){_f1[_f9][1].push(_f4);}else{_f1.push([_f2,[_f4]]);}_f3.update();},remove:function(_fc){if(_f1.length===0){return;}var _fd=[];Y.each(_f1,function(_fe){var _ff=Y.Array.indexOf(_fe[1],_fc);if(_ff===-1){_fd.push(_fe);}else{_fe[1].splice(_ff,1);if(_fe[1].length){_fd.push(_fe);}}});_f1=_fd;_f3.update();},search:function(_100){var _101=[];if(_f1.length>0){Y.each(_f1,function(_102){if(_102[0].indexOf(_f2)===0){_101=_101.concat(_102[1]);}else{var _103=_102[1].length;for(var i=0;i<_103;i++){if(_102[1][i].indexOf(_100)===0){_101.push(_102[1][i]);}}}});}return _101;},update:function(){_9.set(_ec,Y.JSON.stringify(_f1),_f0,"/","."+M.DOMAIN_HOST);}};_d7.plug(Y.mt.plugin.Placeholder);_d6.on("submit",function(e){e.halt();var val=checkKeyword(_d7.get("value"));if(val){submit(val);}});_d7.on({valuechange:handleValueChange(),blur:handleBlur,keydown:handleKeydown});_da.delegate("hover",handleOver,handleOut,"li");_da.delegate("click",handleRemove,".remove");_da.delegate("click",handleSelect,"li");function handleOver(){selectTips(this);}function handleOut(){deselectTips(this);}function submit(kw){var _108=Y.mt.www.MTracker,_109;_8.field(_d6,"w",kw);_f3.add(kw);if(_e9){window._gaq.push(["_trackEvent","InnerLink","Click","header/search/history"]);_109="Asearch.Bhistory";}else{if(_e8){window._gaq.push(["_trackEvent","InnerLink","Click","header/search/smartbox"]);_109="Asearch.Bsmartbox";}else{window._gaq.push(["_trackEvent","InnerLink","Click","header/search/button"]);_109="Asearch.Bmaintop";}}if(!_108.config){_108.applyConf();}_108.initTrackingSession(_109,_108.EVENT_INI_PV);window.setTimeout(function(){_d6.submit();},_eb);}function handleSelect(){var _10a=_e2.indexOf(this);_e8=true;_e9=this.hasClass(_e6);submit(_db[_10a]);}function handleValueChange(){var _10b=null,_10c=500;return function(e){if(_e1){return;}_e8=false;var _10e=checkKeyword(e.newVal);_f2=_10e;if(fetchFromCache(_10e)){return;}if(_10b){return;}_10b=window.setTimeout(function(){_10e=checkKeyword(_d7.get("value"));if(!fetchFromCache(_10e)){fetchTipsAsync(_10e);}_10b=null;},_10c);};}function fetchFromCache(kw){if(!kw){removeTips();return true;}if(Y.Lang.isArray(_e3[kw])){initTips(kw,_e3[kw].concat());return true;}return false;}function checkKeyword(kw){var res=_7(kw);if(res===""){return false;}res=res.replace(/\s{2,}/g," ");return res;}function updateCache(kw,_113){if(Y.Lang.isArray(_113)&&_113.length>0){_e3[kw]=_113.concat();}else{_e3[kw]=false;}}function fetchTipsAsync(_114){if(_d8&&_d8.isInProgress()){_d8.abort();}_d8=_3("/search/smartbox/"+_114,{method:"post",on:{success:function(id,o){var res=_8.getEvalRes(o);if(res.status){initTips(_114,res.data,true);}else{removeTips();updateCache(_114,false);}},failure:function(){removeTips();}}});}function handleRemove(e){e.halt(true);var tip=_8.data(this,"tip"),_11a=this.get("parentNode");if(tip){_f3.remove(tip);}if(_11a){_11a.remove();}if(_ea){window.clearTimeout(_ea);_ea=null;}}function handleBlur(){_ea=window.setTimeout(function(){hideTips();},_eb);}function handleKeydown(e){if(_e0===_dc){return;}switch(e.keyCode){case _c.key.ESC:handleEsc();break;case _c.key.UP:_e1=true;handleUp();break;case _c.key.DOWN:_e1=true;handleDown();break;default:_e1=false;break;}}function handleEsc(){_d7.blur();}function handleUp(){var _11c;if(_e0===_de){showTips();}_e8=true;if(_e0===_dd){_11c=_db.length-2;selectTips(_11c);}else{_11c=getSelectedItem();if(_11c===0){deselectTips(_11c);_11c=_db.length-1;_e8=false;}else{_11c=_11c-1;selectTips(_11c);}}_8.field(_d6,"w",_db[_11c]);}function handleDown(){var _11d;if(_e0===_de){showTips();}_e8=true;if(_e0===_dd){_11d=0;selectTips(_11d);}else{_11d=getSelectedItem();if(_11d===_db.length-2){deselectTips(_11d);_11d=_db.length-1;_e8=false;}else{_11d=_11d+1;selectTips(_11d);}}_8.field(_d6,"w",_db[_11d]);}function selectTips(item){if(_e0===_dc){return;}var _11f;if(Y.Lang.isNumber(item)){_11f=_e2.item(item);}else{_11f=item;}if(_e0===_de){showTips();}deselectTips();_11f.addClass(_e5);_e0=_df;}function initTips(_120,_121,_122){var _123="",_124=_f3.search(_120);if(_122){updateCache(_120,_121);}_db=[];if(_124.length){_124.reverse();Y.Array.each(_124,function(tip){_123+=Y.Lang.sub(_ee,{tipClass:_e6,tipContent:tip});_db.push(tip);});}Y.Array.each(_121,function(tip){if(_db.length>=_e7){return false;}if(Y.Array.indexOf(_db,tip)<0){_123+="<li class=\""+_e4+"\">"+tip+"</li>";_db.push(tip);}});_da.setHTML(_123);showTips();_e2=_da.all("li");_db.push(_120);}function showTips(){_e0=_dd;_d9.show();}function hideTips(){if(_e0===_dc){return;}deselectTips();_e0=_de;_d9.hide();}function removeTips(){_db=[];if(_e2){_e2.remove();}_e0=_dc;_d9.hide();}function deselectTips(){if(_e0!==_df||!_e2){return;}_e2.removeClass(_e5);_e0=_dd;}function getSelectedItem(_127){if(_e0!==_df){return -1;}var _128=_da.one("."+_e5);if(_128){if(_127){return _128;}else{return _e2.indexOf(_128);}}return -1;}},initSubscribe:function(){var _129=Y.one("#hd .subscribe"),_12a="loading",_12b,_12c,_12d,data;if(!_129){return;}_129.on("click",function(e){e.halt();_12d=Y.one("#subscribe-template");if(!_12d){return;}_12c=new _b({id:_d,title:"\u90ae\u4ef6\u8ba2\u9605",width:"500",content:_12d.getHTML()});_12c.open();if(_12b&&_12b.isInProgress()){_12b.abort();}_12b=_3("/maillist/subscribeinfo",{method:"POST",on:{success:function(id,o){var res=_8.getEvalRes(o);if(res.status){data=res.data;updateContent();Y.mt.www.Email.init();Y.use("w-base",function(){var _133=_12c.one(".location");new Y.mt.widget.Cascade(_133,_8.decodeJSON(_133.getAttribute("data-params")));});bindEvent();}},failure:function(){alert("\u8bfb\u53d6\u57ce\u5e02\u6570\u636e\u51fa\u9519");}}});});function updateContent(){Y.one("#subscribe-content").removeClass(_12a);_12c.one("#subscribe-content").setHTML(data.content);}function bindEvent(){var _134=_12c.one(".cancel");_134.on("click",function(){_12c.close();});}},initFavorite:function(){var _135=Y.one("#favorite"),_136="http://www.meituan.com?utm_campaign=home&utm_medium=free&utm_source=Favorites",_137="\u7f8e\u56e2\u7f51-\u6bcf\u5929\u56e2\u8d2d\u4e00\u6b21",ctrl=(window.navigator.userAgent.toLowerCase()).indexOf("mac")!==-1?"Command":"Ctrl",_139="\u62b1\u6b49\uff0c\u60a8\u7684\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\u6b64\u64cd\u4f5c\u3002\n\u8bf7\u4f7f\u7528\u6309\u952e "+ctrl+"+D \u6536\u85cf\u7f8e\u56e2\u3002";if(_135){_135.on("click",addFavorite);}function addFavorite(){if(_135){try{window.external.addFavorite(_136,_137);}catch(ex){try{window.sidebar.addPanel(_137,_136,"");}catch(exTwo){alert(_139);}}}}},bindMore:function(_13a,_13b,_13c){_13a=Y.one(_13a);_13b=Y.one(_13b);if(!_13a||!_13b){return;}var _13d=null,_13e,_13f=0,_140=0,OPEN=1;_13b.setData("rvdStatus",_140);_13c=_13c||{};Y.mix(_13c,{hoverClass:"hover",delay:200,preventDefault:true});if(_13c["preventDefault"]){_13a.on("click",function(e){e.preventDefault();});}_13a.on({mouseover:function(){if(_13d){_13d.cancel();}if(_13b.getData("rvdStatus")===OPEN){return;}_13d=Y.later(_13c.delay,null,function(){_13b.show();_13a.addClass(_13c.hoverClass);_13b.setData("rvdStatus",OPEN);});},mouseout:handleOut});_13e=_13c.ndExtra;if(_13e){_13e.on("click",function(){_13f=1;});}_13b.on("mouseout",handleOut);function handleOut(e){var _144=e.relatedTarget;if(_13d){_13d.cancel();}if(_13b.getData("rvdStatus")===_140){return;}_13d=Y.later(_13c.delay,null,function(){if(_13f){_13f=0;return;}if(!_13b.contains(_144)){_13a.removeClass(_13c.hoverClass);_13b.hide();_13b.setData("rvdStatus",_140);}});}},initLotteryScroll:function(){var _145=Y.one("#lottery-list"),_146=800,_147=4000;if(!_145){return;}_145.plug(Y.mt.plugin.Effect);_145.effect.roll("ul",_146,_147);},disableButton:function(_148,_149){_148=Y.one(_148);if(!_148){return;}_149=typeof _149==="undefined"?true:_149;var _14a="",_14b=["form-button","small-form-button","link-button","small-link-button","normal-button","small-normal-button"];Y.Array.some(_14b,function(_14c){if(_148.hasClass(_14c)){_14a=_14c+"-disabled";return true;}});_148.set("disabled",_149);if(_149){_148.addClass(_14a);}else{_148.removeClass(_14a);}},initAccountMenu:function(){var _14d=Y.one("#J-my-account-toggle"),_14e=_14d&&_14d.next("#J-my-account-menu");if(!_14d||!_14e){return;}var _14f={preventDefault:false};Y.mt.www.bindMore(_14d,_14e,_14f);_14d.on("click",function(){_14d.blur();});},initVipBubble:function(){var _150=Y.one("#J-growth-nav-info");if(!_150){return;}_3("/index/vipbubble",{method:"GET",on:{success:function(id,_152){addBubble(_8.getEvalRes(_152));},failure:function(){}}});function addBubble(_153){var _154=32,_155=16,_156=8,_157=1;var _158,_159,_15a,_15b,_15c,_15d=false,_15e=false;if(!_153.markup){return;}if(_153.status){_159={upgradeNotice:"",bubbleClass:"",btnClass:""};_153=Y.merge(_159,_153);switch(_153.noticeType){case _154:_15a={btnText:"\u7acb\u5373\u5347\u7ea7\u81f3VIP"+_153.noticeValue,btnLink:"/account/upgrade",btnClass:"btn-hot btn-small",btnGA:"upgrade",upgradeNotice:"<br/>\u4f60\u5df2\u7ecf\u7b26\u5408<span class=\"upgrade-value\">VIP"+_153.noticeValue+"</span>\u4f1a\u5458\u7684\u8d44\u683c"};break;case _156:_15d=true;_15a={magiccardTip:"<span class=\"upgrade-value\">50</span>\u79ef\u5206 = <span class=\"upgrade-value\">5</span>\u5143\uff1f",btnText:"\u70b9\u51fb\u9886\u53d6",bubbleClass:"growth-bubble--card",btnClass:"btn-hot btn-small close",btnLink:"/account/viprewards/1",btnGA:"viprewards/magiccard"};break;case _155:_15d=true;_15a={magiccardTip:"\u60a8\u7684\u79ef\u5206\u53ef\u4ee5\u5f53\u94b1\u7528\u5566\uff01",btnClass:"btn-hot btn-small close",btnText:"\u8bc4\u4ef7\u8d5a\u79ef\u5206",bubbleClass:"growth-bubble--card",btnLink:"/rates/list/torate",btnGA:"viprewards/point"};break;case _157:_15d=true;_15a={magiccardTip:"\u60a8\u7684\u79ef\u5206\u53ef\u4ee5\u5f53\u94b1\u7528\u5566\uff01",btnClass:"btn-hot btn-small close",btnText:"\u7acb\u5373\u767b\u5f55\u5151\u6362",btnLink:"/account/viprewards",btnGA:"login"};break;default:_15a={btnText:"\u67e5\u770b\u6211\u7684\u6210\u957f",btnLink:"/account/growth",btnGA:"growth/bubble"};break;}_153=Y.merge(_153,_15a);_158=Y.Lang.sub(_153.markup,_153);_150.append(_158);if(_15d){_15b=_150.one("#J-growth-content");if(_15b){_15b.remove();}}else{_15c=_150.one("#J-magiccard-content");if(_15c){_15c.remove();}}_15e=_153.noticeType?true:false;bindBubbleEvents(_15e);}}function bindBubbleEvents(_15f){var _160=Y.one("#J-my-growth"),_161=Y.one("#J-growth-bubble"),_162,_163=false,_164="vbc",_165,_166,_167;if(!_160){_160=_150.one("#J-login");}_162=_9.get(_164);_166=_9.getExpiresDate(20,0,0);_167=_8.data(_161,"pageview");_165=["/account/viprewards","/deal/verify/","/deal/buy","/order/check/","/cart/"];Y.each(_165,function(page){if(_167.indexOf(page)===0){_163=true;return false;}});if(!_163&&!_162&&_15f){_161.show();}Y.mt.www.bindMore(_160.ancestor(".info-item"),_161,{preventDefault:false});_161.delegate("click",function(){_161.hide();_9.set(_164,true,_166,"/","."+M.DOMAIN_HOST);},".close");}},initNavMore:function(){var _169=Y.one("#J-my-more-toggle"),_16a=_169&&_169.next("#J-my-more-menu");if(_169&&_16a){Y.mt.www.bindMore(_169,_16a,{preventDefault:false});}},initNavHistory:function(){var _16b=Y.one("#J-my-history-toggle"),$WWW=Y.mt.www,_16d={preventDefault:false,delay:100},_16e=true,url="/index/rvd",_170="dropdown-menu__item",_171="dropdown-menu--empty",_172="dropdown-menu--loading",_173;if(!_16b){return;}_173=_16b.next("#J-my-history-menu");$WWW.bindMore(_16b,_173,_16d);_16b.on("mouseover",function(){if(_16e){_3(url,{method:"GET",on:{success:function(id,o){var res=_8.getEvalRes(o);updateData(res.data);_16e=false;}}});}});_173.delegate("click",function(e){e.halt();_8.Cookie.remove("rvd","/","."+M.DOMAIN_HOST);_173.setHTML("<p class=\""+_171+"\">\u6682\u65e0\u6d4f\u89c8\u8bb0\u5f55\u3002</p>").hide().setData("rvdStatus",0);_16b.removeClass("hover");},"#J-clear-my-history");function updateData(data){if(!data){return;}var _179=[],_17a=data.length,temp,_17c,i=0;var _17e="<li class=\""+_170+"\">"+"<a class=\"deal-link\" href=\"{url}\" title=\"{title}\" target=\"_blank\" rel=\"nofollow\" {mtcode}>"+"<img class=\"deal-cover\" src=\"{imgUrl}\" width=\"80\" height=\"50\" gaevent=\"{gaBase}/{index}/photo\" />"+"</a>"+"<h5 class=\"deal-title\">"+"<a class=\"deal-link\" href=\"{url}\" title=\"{title}\" gaevent=\"{gaBase}/{index}/title\" target=\"_blank\" rel=\"nofollow\" {mtcode}>{title}</a>"+"</h5>"+"<a class=\"deal-price-w\" target=\"_blank\" gaevent=\"{gaBase}/price\" href=\"{url}\" mttcode=\"Arecent\">"+"<em class=\"deal-price\">\xa5{price}</em>"+"<span class=\"old-price\">{oldPrice}</span>"+"</a>"+"</li>";if(!data.length){_179.push("<p class=\""+_171+"\">\u6682\u65e0\u6d4f\u89c8\u8bb0\u5f55\u3002</p>");}else{_179.push("<ul>");while(i<_17a){temp=data[i];i++;_17c=Y.Lang.sub(_17e,{"gaBase":"nav/browsingHistory","mtcode":"mttcode=\"Arecent\"","url":temp.url,"title":temp.title,"price":temp.price,"oldPrice":temp.value,"imgUrl":temp.imgurl,"index":i});_179.push(_17c);}_179.push("</ul>");_179.push("<p id=\"J-clear-my-history\" class=\"clear\"><a class=\"clear__btn\" href=\"javascript:void(0)\">\u6e05\u7a7a\u6700\u8fd1\u6d4f\u89c8\u8bb0\u5f55</a></p>");}_173.removeClass(_172).setHTML(_179.join(""));}},initZoomDetect:function(){var _17f=Y.one(window),_180=M.detectZoom,_181=typeof _180!=="undefined",_182,_183,_184=Y.UA.android!==0||Y.UA.ios!==null||Y.UA.userAgent.indexOf("Windows NT 6.2")>0,_185=_8.Cookie.getExpiresDate(60,0,0),_186,_187=1;if(!_181||_184){return;}_182=Y.one("#browser-zoom-tip");_183=_182.one(".close");_186=_8.data(_183,"cookie");checkZoom();_183.on("click",function(){_181=false;_8.Cookie.set(_186,true,_185,"/","."+M.DOMAIN_HOST);_182.hide();});_17f.on("resize",_8.throttle(checkZoom));function checkZoom(){if(!_181){return;}_187=_180.zoom().toFixed(2);if(_187>1||_187<1){_182.show();}else{_182.hide();}}},initStickQrcode:function(){var nd=Y.one(".stick-qrcode"),_189,_18a="stick-qrcode";if(!nd||_9.get(_18a)){return;}Y.use("w-fixedbar",function(Y){_189=new Y.mt.widget.Fixedbar({node:nd,vAlign:"top",topEdge:Y.one("#content").getY()-89,vTopOffset:200,mainAreaWidth:960,hAlign:"left",vBottomOffset:150});});nd.delegate("click",function(e){e.halt();var _18d=_9.getExpiresDate(1,0,0);nd.remove(true);_189.destroy();_9.set(_18a,"1",_18d,"/","."+M.DOMAIN_HOST);},".close");},initMobileBind:function(_18e){var _18f=Y.one("#J-common-mobile-input"),_190=Y.one("#J-common-mobile-verifycode"),_191=Y.mt.www.SysMsg,_192,_193;if(!_18f||!_18e){return;}_18e.on("submit",function(e){if(!_193){return;}var _195=_193.check();if(_195){e.halt(true);showError(_195);window.scrollTo(0,0);if(_193.get("status")===_192.STATUS_MOBILE_INVALID){_18f.focus();}return;}if(_190&&_7(_190.get("value"))===""){e.halt(true);showError("\u8bf7\u83b7\u53d6\u624b\u673a\u9a8c\u8bc1\u7801");window.scrollTo(0,0);_190.focus();return;}});Y.use("mt-mobilebinder",function(Y){var _197=Y.one("#J-common-mobile-verify"),_198=Y.one("#J-common-mobile-tip"),_199=Y.one("#J-common-mobile-verify-link"),_19a=Y.one("#J-common-verify-tip");_192=Y.mt.MobileBinder;_199.hide();_197.show();_193=new _192({ndMobile:_18f,ndVerify:_197,ndMsg:_198,ndVerifyMsg:_19a});});function showError(msg){_191.show("error",msg);}},CartEx:{init:function(){var _19c=Y.one("#J-my-cart");if(!_19c){return;}var Cart=this,_19e=_19c.one("#J-my-cart-menu"),_19f={preventDefault:false,delay:100},_1a0,sub,_1a2=_19c.one("#J-my-cart-toggle");if(_19e){Y.mt.www.bindMore(_1a2,_19e,_19f);sub=_19c.on("mouseover",function(){if(_1a0&&_1a0.isInProgress()){return;}_1a0=Cart.updateDropdownList(function(){sub.detach();});});this.bindNavDelete();}},add:function(_1a3,_1a4){var _1a5=Y.all(_1a3);if(_1a5.isEmpty()){return;}Y.use("www-dialog",function(Y){var $WWW=Y.mt.www,_1a8=$WWW.Dialog,Cart=$WWW.CartEx,_1aa="<a href=\"javascript:void(0);\" gaevent=\"content/main/addtocart/continue\" class=\"close link-button\">&laquo;\u7ee7\u7eed\u6d4f\u89c8</a>",_1ab="<a href=\"/cart\" gaevent=\"content/main/addtocart/cartcheckout\" class=\"link-button-orange\">\u53bb\u8d2d\u7269\u8f66\u7ed3\u7b97&raquo;</a>",_1ac="<a href=\"/cart\" class=\"link-button-orange\">\u6574\u7406\u8d2d\u7269\u8f66&raquo;</a>",_1ad="<div class=\"operate\">"+_1aa+_1ab+"</div>",_1ae="<div class=\"operate\">"+_1aa+_1ac+"</div>",_1af="cart-result-dialog",_1b0;_1a5.on("click",function(e){e.preventDefault();var _1b2=_8.data(e.target,"dealid"),_1b3=_8.data(e.target,"cityid"),_1b4="/cart/add/"+_1b2+"/"+_1b3;if(_1b0&&_1b0.isInProgress()){_1b0.abort();}_1b0=_3(_1b4,{method:"POST",on:{success:function(id,o){var res=_8.getEvalRes(o);if(res.status){handleSuccess(res);}else{handleFailure(res);}},failure:function(){handleRequestFailure();}}});});function handleSuccess(res){var _1b9;if(_1a4==="nofeedback"){window.location.href="/cart/";return;}_1b9=res.recommendResult;if(_1b9===undefined){_1a8.createResultDialog({type:"success",title:"\u6210\u529f\u52a0\u5165\u8d2d\u7269\u8f66\uff01",tip:res.msg||"",extra:_1ad},"",_1af);Cart.updateDropdownList();}else{var _1ba=Y.one("#addcart-recdeal-markup"),_1bb="cart-result-deals-dialog",_1bc;_1bc=new _b({id:_1bb,width:"590px",height:"360px",content:Y.Lang.sub(_1ba.getHTML(),{title:"\u6210\u529f\u52a0\u5165\u8d2d\u7269\u8f66\uff01",tip:res.msg||"",operate:_1ad,deals:_1b9})});Cart.updateDropdownList();_1bc.open();}}function handleFailure(res){res=res||{};_1a8.createResultDialog({type:"failure",title:"\u6dfb\u52a0\u5931\u8d25\uff01",tip:res.msg||"",extra:_1ae},"",_1af);}function handleRequestFailure(){_1a8.createResultDialog({type:"failure",title:"\u6dfb\u52a0\u5931\u8d25\uff01",tip:"\u7f51\u7edc\u7e41\u5fd9\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\u3002"},"",_1af);}});},bindNavDelete:function(){var _1be=Y.one("#J-my-cart"),Cart=this,_1c0=null;_1be.delegate("click",function(e){e.preventDefault();if(_1c0&&_1c0.isInProgress()){return;}var _1c2=this;_1c0=_3("/cart/remove",{method:"POST",data:_8.toPostData({dealid:_8.data(_1c2,"id")}),on:{success:function(id,o){var res=_8.getEvalRes(o);if(res.status){handleSuccess(_1c2);}}}});},".delete");function handleSuccess(_1c6){var ndLi=_1c6.ancestor(".dropdown-menu__item"),ndUl=ndLi.ancestor(),_1c9=_1be.one(".badge"),_1ca=parseInt(_1c9.get("text"),10)-1;ndLi.plug(Y.mt.plugin.Effect);ndLi.effect.fadeOut(true,200,function(){var _1cb,more=0,_1cd;Cart.updateCount(_1ca);if(_1ca===0){ndUl.ancestor(".dropdown-menu").setHTML(Cart.getEmptyTips());return;}_1cd=_1be.one(".cart-discription");if(!_1cd){return;}_1cb=_1cd.one(".cart-deal-num");more=parseInt(_1cb.getHTML(),10);if(more===1){_1cd.hide();ndUl.removeClass("long-list");}more--;if(more<0){more=0;}_1cb.setHTML(more);});}},updateCount:function(_1ce){var _1cf=Y.one("#J-my-cart"),_1d0,_1d1;if(!_1cf){return;}_1d0=_1cf.one(".badge");_1d1=_8.data(_1d0,"newIndex")==="true";if(!_1d0&&_1ce>0){if(_1d1){_1cf.one("#J-my-cart-toggle").append("<em class=\"badge\" data-newIndex=\"true\"><strong class=\"cart-count\">"+_1ce+"</strong>\u4ef6</em>");}else{_1cf.one("#J-my-cart-toggle").append("<span class=\"badge\">"+_1ce+"</span>");}}if(_1d0){if(_1d1){_1d0.setHTML("<strong class=\"cart-count\">"+_1ce+"</strong>\u4ef6");}else{_1d0.setHTML(_1ce);if(_1ce===0){_1d0.hide();}else{if(_1d0.getStyle("display")==="none"){_1d0.show();}}}}},getEmptyTips:function(){return "<p class=\"dropdown-menu--empty\">\u6682\u65f6\u6ca1\u6709\u5546\u54c1</p>";},updateDropdownList:function(cb){var _1d3=Y.one("#J-my-cart"),_1d4=_1d3.one("#J-my-cart-menu"),_1d5="dropdown-menu--loading",_1d6="dropdown-menu__item",Cart=this,url="/index/cartdeals",_1d9=null,_1da=5;_1d9=_3(url,{method:"GET",on:{success:function(id,o){var res=_8.getEvalRes(o);if(res.data){update(res.data);}if(cb){cb();}}}});function update(data){var _1df=[],_1e0=" gaevent=\"nav/cart/{index}/photo\"",_1e1=" gaevent=\"nav/cart/{index}/title\"",_1e2="",_1e3,_1e4="<a href=\"{url}\" title=\"{title}\" target=\"_blank\" rel=\"nofollow\" class=\"deal-link\""+_1e2+_1e0+">"+"    <img class=\"deal-cover\" src=\"{imgUrl}\" width=\"80\" height=\"50\" />"+"</a>"+"<h5 class=\"deal-title\"><a href=\"{url}\" title=\"{title}\" target=\"_blank\" rel=\"nofollow\" class=\"deal-link\""+_1e2+_1e1+">{title}</a></h5>"+"<p class=\"deal-price-w\"><a href=\"javascript:void(0);\" data-id=\"{dealid}\" class=\"delete\">\u5220\u9664</a><em class=\"deal-price\">\xa5{price}</em></p>";Cart.updateCount(data.length);if(!data.length){_1df.push(Cart.getEmptyTips());}else{_1e3=data.length>_1da;_1df.push("<ul class=\"list-wrapper"+(_1e3?" long-list":"")+"\">");Y.Array.each(data,function(deal,_1e6){_1df.push("<li class=\""+_1d6+"\">");_1df.push(Y.Lang.sub(_1e4,{url:deal.url,title:deal.title,price:deal.price,imgUrl:deal.imgurl,dealid:deal.dealid,index:_1e6+1}));_1df.push("</li>");});_1df.push("</ul>");if(_1e3){_1df.push("<p class=\"cart-discription\">\u8d2d\u7269\u8f66\u91cc\u8fd8\u6709"+"<span class=\"cart-deal-num\">"+(data.length-_1da)+"</span>"+"\u4e2a\u56e2\u8d2d</p>");}_1df.push("<p class=\"check-my-cart\"><a href=\"/cart/\" class=\"link-button-orange\" gaevent=\"nav/cart/checkbutton\">\u67e5\u770b\u6211\u7684\u8d2d\u7269\u8f66</a></p>");}_1d4.removeClass(_1d5).setHTML(_1df.join(""));}return _1d9;}},SysMsg:{show:function(type,_1e8){var _1e9,_1ea=Y.all("#doc .sysmsgw"),_1eb;if(_1ea.size()){_1e9=_1ea.item(0);}else{_1e9=$N.create("<div class=\"sysmsgw\"><div class=\"sysmsg\"><p></p><span class=\"close\">\u5173\u95ed</span></div></div>");_1eb=Y.one("#hdw")||Y.one("#site-mast");_1eb.insert(_1e9,"after");}_1e9.set("id","sysmsg-"+type);_1e9.one("p").setHTML(_1e8);this.initEvent();},remove:function(all){var _1ed=Y.all("#doc .sysmsgw");if(_1ed.size()){if(!all){_1ed.item(0).remove(true);}else{_1ed.remove(true);}}},initEvent:function(){var _1ee=Y.one("#sysmsg-error, #sysmsg-success");if(!_1ee){return;}_1ee.delegate("click",function(){_1ee.remove(true);},".close");},initSysTip:function(){var _1ef=Y.one("#sysmsg-tip"),_1f0=Y.one("#sysmsg-tip-close");if(!_1ef||!_1f0){return;}_1f0.on("click",function(){_1ef.remove(true);});},init:function(){this.initSysTip();this.initEvent();}},CommonTips:{_isFirstMsg:true,config:function(){var _1f1=Y.one("#J-common-tip");if(!_1f1){return;}_1f1.plug(Y.mt.plugin.Effect);_1f1.delegate("click",function(){_1f1.effect.fadeOutSimple(false,200);},".close");},init:function(page,_1f3){var _1f4=Y.one("#J-common-tip"),_1f5=_1f4.one(".close"),_1f6,_1f7,_1f8,_1f9=false,_1fa=this;_1f4.plug(Y.mt.plugin.Effect);_1f8=(_1f3===undefined)?{}:{"deal":_1f3};_1f4.delegate("click",function(){if((_1f6&&_1f6.isInProgress())||_1f9){return;}_1f8=_1f7;if(_1f3!==undefined){_1f8["deal"]=_1f3;}_1f6=_1fa.requestMsg(page,_1f8,handleMsgRcvd);},".close");_1f6=_1fa.requestMsg(page,_1f8,handleMsgRcvd);function handleMsgRcvd(id,o){var _1fd;_1f7=_8.getEvalRes(o);if(_1f7.status===0||!_1f7.msg){_1f9=true;}else{_1fd="<p>"+_1f7.msg+"</p>";_1f5.setAttribute("gaevent",_1f7.gaevent);}if(_1fa._isFirstMsg){if(_1f9){return;}_1fa.show(_1fd);_1fa._isFirstMsg=false;}else{if(_1f9){_1f4.effect.fadeOut(false,200,function(){Y.Global.fire("PageHeight:change");});}else{_1f4.effect.fadeOutSimple(false,200,function(){_1fa.show(_1fd);});}}}},show:function(_1fe){var _1ff=Y.one("#J-common-tip"),_200=_1ff.one(".content");_200.setHTML(_1fe);if(this._isFirstMsg){_1ff.show();Y.Global.fire("PageHeight:change");if(_4&&_4<8){_8.reflow();}}else{_1ff.effect.fadeInSimple("middle",function(){if(_4&&_4<8){_8.reflow();}});}this.trackViewEvent(_1ff);},requestMsg:function(page,_202,_203){return _3("/index/tips/"+page,{method:"POST",data:_8.toPostData(_202),on:{success:_203,failure:function(){}}});},trackViewEvent:function(_204){var _205="ga-params",_206=_204.all("[data-"+_205+"]");_206.each(function(_207){var _208=_8.data(_207,_205).split("|");_gaq.push(["_trackEvent"].concat(_208));});}},Email:{showSubscribeSuccess:function(_209){_gaq.push(["_trackPageview","/maillist/subscribed"]);show();function show(){var _20a,type=getHelpType(_209),html=[];html.push("<div class=\"setting\"><h4>\u60a8\u53ef\u80fd\u6536\u4e0d\u5230\u8ba2\u9605\u90ae\u4ef6...</h4><p class=\"text\">\u8bf7\u5c06 <strong>info@meituan.com</strong> \u52a0\u5165\u90ae\u7bb1\u767d\u540d\u5355</p>");if(type){html.push("<a class=\"link-button\" href=\"/help/email/"+type+"\" target=\"_blank\">\u7acb\u5373\u8fdb\u884c\u8bbe\u7f6e</a>");}html.push("</div>");_20a=new _b({id:_d,title:"\u90ae\u4ef6\u8ba2\u9605\u6210\u529f"});_20a.showResult({title:"\u90ae\u4ef6\u8ba2\u9605\u6210\u529f",width:"410px",type:"success",tip:"\u6bcf\u5929\u7684\u56e2\u8d2d\u5c06\u53ca\u65f6\u53d1\u5230\u60a8\u90ae\u7bb1",extra:html.join("")});_20a.open();}function getHelpType(_20d){var _20e={"163.com":"163","126.com":"126","gmail.com":"gmail","qq.com":"qq","vip.qq.com":"qq","foxmail.com":"qq","live.com":"live","live.cn":"live","hotmail.com":"live","yahoo.com.cn":"yahoo","yahoo.cn":"yahoo","sina.com":"sina","vip.sina.com":"sina","sohu.com":"sohu","139.com":"139"};var _20f,key;if(_20d){_20f=_20d.indexOf("@");if(_20f){key=_20d.substr(_20f+1);if(_20e[key]){return _20e[key];}}}return "other";}},subscribe:function(_211,_212){_211=Y.one(_211);if(!_211){return;}var _213=_8.field(_211,"email"),_214;_213.plug(Y.mt.plugin.Placeholder);if(!_212){addFormChecker();}_211.on("submit",function(e){e.halt();if(_214&&_214.isInProgress()){_214.abort();}var _216=_213.get("value");if(_212&&checkNoCheckerEmail(_216)){return;}_214=_3(_211.get("action"),{method:"POST",form:{id:_211},on:{success:function(id,o){var res=_8.getEvalRes(o),data=res.data;if(res.status){Y.mt.www.Email.showSubscribeSuccess(_216);}else{if(data&&data.needCaptcha){window.location.href="/maillist/subscribe/"+data.city["slug"]+"/"+data.emailDef;}else{alert(res.msg);}}},failure:function(id,o){if(o.statusText&&o.statusText==="abort"){return;}}}});});function checkNoCheckerEmail(_21d){if(_21d===""){alert("\u8bf7\u8f93\u5165\u90ae\u7bb1");return true;}else{if(!Y.mt.www.REG.email.test(_21d)){alert("\u90ae\u7bb1\u683c\u5f0f\u9519\u8bef");return true;}}return false;}function addFormChecker(){var _21e,_21f=_8.field(_211,"city"),_220=_8.field(_211,"captcha"),_221=_8.field(_211,"province");_21e=new _a({form:_211,fields:{email:{node:_213,validateFn:checkEmail,typeTip:""},city:{node:_21f,validateFn:checkLocation,typeTip:""},captcha:{node:_220,validateFn:checkCaptcha,typeTip:""}},tipClass:_a.CLASS_BLOCK_TIP,checkEvent:"blur"});if(_221){_221.on("change",function(){window.setTimeout(function(){var _222=_21e.get("fields").city;if(_21f.get("value")==="-1"){_21e.resetField(_222);}else{_21e.fire("success",{field:_222});}},200);});}function checkEmail(){var _223=_213.get("value");if(_223===""){return "\u8bf7\u8f93\u5165\u90ae\u7bb1";}else{if(!Y.mt.www.REG.email.test(_223)){return "\u90ae\u7bb1\u683c\u5f0f\u9519\u8bef";}}return false;}function checkLocation(){if(_221.get("value")==="-1"){return "\u8bf7\u9009\u62e9\u7701\u4efd";}else{if(_21f.get("value")==="-1"){return "\u8bf7\u9009\u62e9\u57ce\u5e02";}}return false;}function checkCaptcha(){var _224=_220.get("value");if(_224===""){return "\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801";}else{if(_7(_224).length!==4){return "\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u9a8c\u8bc1\u7801";}}return false;}}},autoComplete:function(_225,_226){_225=Y.one(_225);_226=Y.one(_226);if(!_225||!_226){return;}var _227,_228,_229=["qq.com","163.com","126.com","sina.com","hotmail.com","sohu.com","gmail.com"],_22a=0,_22b=0,_22c;_226.setHTML("<p class=\"email-title\">\u8bf7\u9009\u62e9\u60a8\u7684\u90ae\u7bb1\u7c7b\u578b...</p><ul class=\"email-list\"></ul>");if(_5){_228=$N.create("<iframe frameborder=0 class=\"iframe\"></iframe>");_226.prepend(_228);}_227=_226.one("ul");attachEvent();function attachEvent(){Y.one(document.body).on("click",function(e){var _22e=e.target;if(_22e!==_225&&!_226.contains(_22e)){leave();}});_225.on("keydown",function(e){var key=e.keyCode;if(key===_c.key.TAB){leave();}else{if(key===_c.key.ENTER){if(_226.getStyle("display")==="block"){e.halt();select();}}else{if(key===_c.key.UP||key===_c.key.DOWN){if(e.shiftKey===1){return;}e.halt();if(key===_c.key.UP){if(_22a<=0){_22a=_22b;}_22a--;}else{if(key===_c.key.DOWN){if(_22a>_22b-2){_22a=-1;}_22a++;}}activeItem(_22a);}else{if(_22c){window.clearTimeout(_22c);_22c=null;}_22c=window.setTimeout(function(){displayList();},50);}}}});_227.delegate("mouseover",function(){var nlLi=_227.all("li"),_232=nlLi.indexOf(this);activeItem(_232);},"li");_227.delegate("click",function(){select(this);},"li");}function displayList(){var mail=_225.get("value"),_234=mail.indexOf("@"),_235="",name="",html=[];if(_234<0){name=mail;}else{name=mail.substr(0,_234);if(_234!==(mail.length-1)){_235=mail.substr(_234+1);}}html.push("<li>"+mail+"</li>");Y.Array.each(_229,function(_238){var _239=_238.substr(0,_235.length),_23a;if(_235===""||_235===_239){_23a=name+"@"+_238;html.push("<li title=\""+_23a+"\">"+_23a+"</li>");}});_227.setHTML(html.join(""));_226.show();activeItem(0);_22b=_226.all("li").size();if(_228){_228.setStyles({width:_226.get("offsetWidth"),height:_226.get("offsetHeight"),visibility:"visible"});}}function activeItem(_23b){var nlLi=_227.all("li"),_23d=nlLi.item(_23b);if(_23d){nlLi.removeClass("current");_23d.addClass("current");_22a=_23b;}}function select(ndLi){var val;if(typeof ndLi!=="undefined"){val=ndLi.getHTML();}else{val=_227.all("li").item(_22a).getHTML();}_225.set("value",val);leave();}function leave(){if(_22c){window.clearTimeout(_22c);_22c=null;}_226.hide();}},init:function(){this.subscribe("#header-subscribe-form");this.autoComplete("#header-subscribe-email","#header-subscribe-auto");}},MTracker:{init:function(o){this.applyConf(o);this.trackEvent();this.trackEventNew();this.update();},applyConf:function(o){var _242=this;var conf={cookie:"__t",delimiter:".",expire:{d:0,h:0,m:30},attr:"mttcode"};if(o){_242.config=Y.mix(o,conf);}else{_242.config=conf;}_242.EVENT_INI_PV=0;_242.URL_INI_PV=1;},update:function(){var _244=this;if(M.Env._isTCUptodate){return;}M.Env._isTCUptodate=true;var _245=_244.config.delimiter,_246=this.getCookie();if(_246===""){return;}_246=_246.split(_245);_246[1]=(+_246[1])+1;_244.TS=Y.Lang.now();_246[2]=_244.TS;_246=_246.join(_245);_244.setCookie(_246);},setCookie:function(_247){var c=this.config.cookie,e=this.config.expire,_24a=this.getExpires(e.d,e.h,e.m),ereg=/E\w+/,_24c=_8.Cookie.get(c).match(ereg);if(_24c&&!_247.match(ereg)){_247+="."+_24c[0];}_8.Cookie.set(c,_247,_24a,"/","."+M.DOMAIN_HOST);},getCookie:function(){return _8.Cookie.get(this.config.cookie);},initTrackingSession:function(code,_24e){var _24f=this,t=Y.Lang.now(),_251=[t,_24e,t,code].join(_24f.config.delimiter);_24f.TS=t;_24f.setCookie(_251);M.Env._isTCUptodate=true;},getExpires:function(days,_253,_254){var _255,_256=this.TS;if(typeof days==="number"&&typeof _253==="number"&&typeof _254==="number"){_255=new Date(_256);_255.setDate(_255.getDate()+parseInt(days,10));_255.setHours(_255.getHours()+parseInt(_253,10));_255.setMinutes(_255.getMinutes()+parseInt(_254,10));return _255.toUTCString();}return "";},trackEvent:function(){var _257=Y.one(document.body),_258=this,attr=_258.config.attr;_257.delegate("click",function(){var _25a=this.getAttribute(attr);_258.initTrackingSession(_25a,_258.EVENT_INI_PV);},"["+attr+"]");},trackEventNew:function(){var _25b=Y.one(document.body),_25c=this,_25d="$",_25e="mttrigger",_25f="mtdisable",attr="data-mtcode",_261="mtnode",_262="data-"+_261;_25b.delegate("click",function(e){var _264=e.target;if(_264.get("tagName").toLowerCase()!=="a"&&!_264.hasClass(_25e)&&!_264.ancestor("a, ."+_25e)){return;}if(_264.hasClass(_25f)||_264.ancestor("."+_25f)){return;}var _265=decode(this.getAttribute(attr)),_266=this.ancestors("["+_262+"]"),code,_268={};if(!_266.isEmpty()){_266.each(function(nd){Y.mix(_268,decode(_8.data(nd,_261)),true);});}code=encode(Y.mix(_265,_268));_25c.initTrackingSession(code,_25c.EVENT_INI_PV);},"["+attr+"]");function decode(code){if(!code){return {};}var arr=code.split(_25c.config.delimiter),ret={};Y.Array.each(arr,function(_26d){ret[_26d.charAt(0)]=_26d.slice(1);});return ret;}function encode(_26e){var ret=[];Y.Object.each(_26e,function(val,key){if(val!==_25d){ret.push(key+val);}});return ret.join(_25c.config.delimiter);}},trackUrl:function(_272){var _273=this;_273.applyConf();if(Y.Lang.isArray(_272)){Y.Array.each(_272,track);}else{track(_272);}function track(cfg){var m=cfg.mttcode,p=cfg.pathname,f=cfg.fnIsTargetUrl;if(!isTargetUrl(p,f)){return;}_273.initTrackingSession(m,_273.URL_INI_PV);}function isTargetUrl(_278,_279){var pn=window.location.pathname;if(Y.Lang.isArray(_278)&&Y.Array.indexOf(_278,pn)!==-1){return true;}else{if(_278&&pn===_278){return true;}else{if(_279&&_279()){return true;}}}return false;}}}};Y.mt.www.REG={email:/^[\w\.\-\+]+@([\w\-]+\.)+[a-z]{2,4}$/i,username:/^[\.\w\u4e00-\u9fa5\uF900-\uFA2D]{2,16}$/i,password:/^[\x21-\x7e]{6,32}$/i,mobile:/^\d{11}$/};Y.mt.www.Iframe=(function(){return {scrollTop:function(){if(window.top===window.self){return;}window.top.scroll(0,0);},setParentHeight:function(){var _27b="mtcrossdomain-height";var _27c;if(window.top===window.self){return;}if(_4){_27c=document.documentElement.scrollHeight;}else{_27c=parseInt(Y.one(document.body).getStyle("height"),10);}if(!_27c||_27c<1134){_27c=1134;}var _27d=window.top.document.getElementById(_27b);if(_27d){_27d.style.height=_27c+"px";}}};}());},"1.0.0",{requires:["mt-base","io-base","io-form","p-node-placeholder","p-node-effect","mt-formchecker","mt-dialog","mt-log"]});