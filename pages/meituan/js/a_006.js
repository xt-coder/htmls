M.add("w-fixedbar",function(Y){var _2=Y.mt.util,_3=(Y.UA.ie===6),PX="px";var _5=function(){_5.superclass.constructor.apply(this,arguments);};_5.NAME="Fixedbar";_5.CSS_PREFIX="widget-fixedbar";_5.ATTRS={node:{value:null,setter:function(_6){return Y.one(_6);},writeOnce:true},mainAreaWidth:{value:960,writeOnce:true},canDisappear:{value:false,writeOnce:true},hAlign:{value:"left",writeOnce:true},hLeftOffset:{value:10,writeOnce:true},hRightOffset:{value:10,writeOnce:true},vAlign:{value:"bottom",writeOnce:true},vTopOffset:{value:0,writeOnce:true},vBottomOffset:{value:0,writeOnce:true},vMinScrollTop:{value:0,writeOnce:true},topEdge:{value:null,setter:function(_7){var nd;if(Y.Lang.isNumber(_7)){return _7;}nd=Y.one(_7);if(nd){return nd.getY();}return undefined;},writeOnce:true},isStaticBottomEdge:{value:false,writeOnce:true},bottomEdge:{value:"#ft",writeOnce:true}};Y.extend(_5,Y.Widget,{initializer:function(){var _9=this,_a=_9.get("canDisappear"),_b=_9.get("node"),_c;_9._topEdge=_9.get("topEdge");_9._delta=10;if(!_b){throw new Error(_5.NAME+": \u6ca1\u6709\u8bbe\u7f6enode\u6216node\u4e0d\u5b58\u5728");}if(Y.Lang.isNumber(_9.get("bottomEdge"))&&!_9.get("isStaticBottomEdge")){throw new Error(_5.NAME+": isStaticBottomEdge\u4e3afalse\u65f6\uff0cbottomEdge\u4e0d\u80fd\u4e3a\u6570\u5b57");}_c=Y.mt.UIUtil.getDimensions(_b);_9._hostHeight=_c.offsetHeight;_9._hostWidth=_c.offsetWidth;if(!_a){_b.show();}_9._handlers={};_9._bindEvent();},destructor:function(){_2.detachHandle(this._handlers);},_bindEvent:function(){var _d=this,_e=_d.get("node"),_f=_d.get("canDisappear"),_10=_d.get("vMinScrollTop"),_11,_12=_d._delta,_13=parseInt(_d.get("vTopOffset"),10),_14=_13,_15=Y.one(window),_16=_15.get("winHeight"),_17=_15.get("winWidth"),_18=_d._hostHeight,_19=_d._hostWidth;alignHost();Y.Global.on("PageHeight:change",function(){window.setTimeout(function(){_11=_d._getBottomEdge();handleScroll();},50);});window.setTimeout(handleResize,200);Y.mt.util.addLoadListener(function(){_11=_d._getBottomEdge();});_d._handlers.scroll=_15.on("scroll",_2.throttle(handleScroll));_d._handlers.resize=_15.on("resize",_2.throttle(handleResize));function alignHost(){var _1a=parseInt(_d.get("mainAreaWidth"),10),_1b=parseInt(_d.get("hLeftOffset"),10);if(_14){if(_16<_13+_18){_14=_16-_18-_12;}else{_14=_13;}}_d._hostStyleTop=_14;_d._alignVerticalDirection();if(_d.get("hAlign")==="right"){_e.setStyle("right",_d.get("hRightOffset")+PX);}else{if((_17-_1a)/2<_19+_1b){_e.setStyle("left",(_17-_19-_1b)+PX);}else{_e.setStyle("left",((_17+_1a)/2+_1b)+PX);}}}function handleScroll(){var _1c=_e.get("docScrollY");if(_f&&_1c<_10){if(_e.getStyle("display")!=="none"){_e.hide();}return;}_e.show();_d._alignVerticalDirection();}function handleResize(){_16=_15.get("winHeight");_17=_15.get("winWidth");alignHost();handleScroll();}},_alignVerticalDirection:function(){var top,_1e,_1f=this,_20=_1f.get("node"),_21=Y.one(window),_22=_21.get("winHeight"),_23=parseInt(_1f.get("vBottomOffset"),10),_24=_1f.get("vAlign"),_25=_20.get("docScrollY"),_26=parseInt(_1f._getBottomEdge(),10),_27=_1f._topEdge,_28=_1f._delta,_29=_1f._hostStyleTop,_2a=_25+_22-_26,_2b=_1f._hostHeight;if(_3){if(_24==="bottom"){top=(_25+_22)-(_23+_2b);if(_27&&top<_27){top=_27;}else{if(_2a>0){top-=_2a;}}}else{top=_25+_29;if(_26&&(_2b+top+_23>_26)){top=_26-_2b-_23;}else{if(_27&&top<_27){top=_27;}else{if(_2a>0&&(top+_2b>_26)){top=_26-_2b-_28;}}}}_20.setStyle("top",top+PX);}else{if(_24==="bottom"){_1e=_23;if(_27&&(_25+_22-(_2b+_1e)<_27)){_1e=_22-(_27-_25)-_2b;}else{if(_2a>0){_1e+=_2a;}}_20.setStyle("bottom",_1e+PX);}else{top=_29;if(_26&&(_25+_2b+top+_23>_26)){top=_26-_25-_2b-_23;}else{if(_27&&_25+top<_27){top=_27-_25;}else{if(_2a>0&&(_25+top+_2b>_26)){top=_26-_25-_2b-_28;}}}_20.setStyle("top",top+PX);}}},_getBottomEdge:function(){var _2c=this,_2d=this.get("bottomEdge"),_2e=_2c.get("isStaticBottomEdge"),nd=Y.one(_2d),_30=_2d;if(_2e){if(_2c._staticBottomEdge){return _2c._staticBottomEdge;}if(Y.Lang.isNumber(_2d)){_30=parseInt(_2d,10);}else{if(nd){_30=nd.getY();}else{_30=document.body.offsetHeight;}}_2c._staticBottomEdge=_30;}else{if(nd){_30=nd.getY();}else{_30=document.body.offsetHeight;}}return _30;}});Y.mt.widget.Fixedbar=_5;},"1.0.0",{requires:["mt-base","widget"]});